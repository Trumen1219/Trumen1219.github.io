

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Trumen">
  <meta name="keywords" content="">
  
    <meta name="description" content="1. React 入门概述1.1 介绍用于动态构建用户界面的 JavaScript 库(只关注于视图) 1.发送请求获取数据 2.处理数据（过滤，整理格式等） 3.操作DOM呈现页面（React做的事情）  React是一个将数据渲染为HTML视图的开源JavaScript库 1.2 原生JavaScript的缺点1. 原生JavaScript操作DOM繁琐，效率低（DOM-API操作UI） 2.">
<meta property="og:type" content="article">
<meta property="og:title" content="React">
<meta property="og:url" content="https://trumen1219.github.io/2023/03/01/React/index.html">
<meta property="og:site_name" content="Trumen&#39;s blog">
<meta property="og:description" content="1. React 入门概述1.1 介绍用于动态构建用户界面的 JavaScript 库(只关注于视图) 1.发送请求获取数据 2.处理数据（过滤，整理格式等） 3.操作DOM呈现页面（React做的事情）  React是一个将数据渲染为HTML视图的开源JavaScript库 1.2 原生JavaScript的缺点1. 原生JavaScript操作DOM繁琐，效率低（DOM-API操作UI） 2.">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://user-images.githubusercontent.com/117837871/216939381-0451d71f-c024-46bf-8fb1-ff25e775c093.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/117837871/216941884-1eb6f1e5-c9f2-429b-b6e0-38214ffd8a06.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/117837871/216941911-7af3b347-61b2-4a52-93a3-c98240f22c6d.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/117837871/217765611-333f4b51-104d-478c-a907-c875c5ba30e0.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/117837871/217765681-3219dbba-ba4e-430b-89ab-491304411957.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/117837871/217765719-0818ccdb-4d40-40c7-84ba-1556b6028719.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/117837871/217765896-b98139ee-c913-4141-9b3f-52c687cd07c8.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/117837871/217765963-ceed33e2-9a84-4e6e-b591-ee0873ff1c45.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/117837871/217766032-9d58d0cf-c11c-44d5-8a96-8d2d1681b4c0.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/117837871/218298374-9f3931c3-ea0d-45a5-80c2-cd4b15e1a51f.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/117837871/218298384-a6b30e7b-a208-408e-b0ca-27d979d71fe6.png">
<meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fc4090cc0a5f44248e534fec82ab82d2~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image">
<meta property="og:image" content="https://user-images.githubusercontent.com/117837871/218704757-f4bd7825-9d5d-4eb6-89fe-2c33532ac4aa.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/117837871/218704847-ae672973-44d9-44c1-b65c-45a8751596e1.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/117837871/218704968-244b5f61-9cad-4458-8fcf-fa62ba1e00ab.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/117837871/220043507-be6a541b-0555-45ef-9f6b-3b4d3d7f2933.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/117837871/220043555-34074e8d-6f6e-4465-b3f4-3b66839e455d.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/117837871/220043678-0443345f-4ad2-4437-a593-ef3bd9cba086.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/117837871/220043748-e4348946-70a0-4c1b-b839-a110a2ef6382.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/117837871/220043789-c8f7da4b-7405-4279-b1fd-f644c920d5dc.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/117837871/220043844-498fe04c-4675-4891-81b3-fcee7c9c1a97.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/117837871/220043913-c6f6f826-a2e6-46d8-b6d6-befc49fc5948.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/117837871/220586710-8cda4354-1d15-44b3-8d2e-1196c43a9679.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/117837871/220586632-ce9102cb-724b-472c-b580-74e5c67dd91b.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/117837871/220586897-9993ceae-c17b-4db0-b1fb-f51317040f25.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/117837871/220587169-d8c3072c-e800-46c0-8db2-83abd26f2911.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/117837871/220587280-1a81ccc3-a9b7-4012-aeed-b8959acf65a0.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/117837871/220587310-7b5ec9e9-8c6b-4929-b215-130d49d0e17a.png">
<meta property="article:published_time" content="2023-02-28T16:00:00.000Z">
<meta property="article:modified_time" content="2023-07-23T16:23:57.257Z">
<meta property="article:author" content="Trumen">
<meta property="article:tag" content="React">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://user-images.githubusercontent.com/117837871/216939381-0451d71f-c024-46bf-8fb1-ff25e775c093.png">
  
  
  
  <title>React - Trumen&#39;s blog</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"trumen1219.github.io","root":"/","version":"1.9.5","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Trumen</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.jpg') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="React"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2023-03-01 00:00" pubdate>
          2023年3月1日 凌晨
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          78k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          651 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">React</h1>
            
            
              <div class="markdown-body">
                
                <h1 id="1-React-入门概述"><a href="#1-React-入门概述" class="headerlink" title="1. React 入门概述"></a>1. React 入门概述</h1><h2 id="1-1-介绍"><a href="#1-1-介绍" class="headerlink" title="1.1 介绍"></a>1.1 介绍</h2><p>用于动态构建用户界面的 JavaScript 库(只关注于视图)</p>
<pre><code class="hljs">1.发送请求获取数据
2.处理数据（过滤，整理格式等）
3.操作DOM呈现页面（React做的事情）
</code></pre>
<p>React是一个将数据渲染为HTML视图的开源JavaScript库</p>
<h2 id="1-2-原生JavaScript的缺点"><a href="#1-2-原生JavaScript的缺点" class="headerlink" title="1.2 原生JavaScript的缺点"></a>1.2 原生JavaScript的缺点</h2><pre><code class="hljs">1. 原生JavaScript操作DOM繁琐，效率低（DOM-API操作UI）
2. 使用JavaScript直接操作DOM，浏览器会进行大量的重绘重排
3. 原生JavaScript没有组件化编码方案，代码复用率很低
</code></pre>
<p>【补充】浏览器重绘重排</p>
<p>浏览器重绘(repaint)重排(reflow)与优化[浏览器机制]</p>
<p><strong>重绘</strong>(repaint)：当一个元素的外观发生改变，但没有改变布局,重新把元素外观绘制出来的过程，叫做重绘</p>
<p><strong>重排</strong>(reflow)：当DOM的变化影响了元素的几何信息(DOM对象的位置和尺寸大小)，浏览器需要重新计算元素的几何属性，将其安放在界面中的正确位置，这个过程叫做重排</p>
<p>##【补充】模块化与组件化</p>
<pre><code class="hljs">• 模块
    1. 理解：向外提供特定功能的js程序, 一般就是一个js文件
    2. 为什么要拆成模块：随着业务逻辑增加，代码越来越多且复杂。
    3. 作用：复用js, 简化js的编写, 提高js运行效率
    
• 组件
    1. 理解：用来实现局部功能效果的代码和资源的集合(html/css/js/image等等)
    2. 为什么要用组件： 一个界面的功能更复杂
    3. 作用：复用编码, 简化项目编码, 提高运行效率
    
</code></pre>
<p>模块化：当应用的js都以模块来编写的, 这个应用就是一个模块化的应用</p>
<p>组件化：当应用是以多组件的方式实现, 这个应用就是一个组件化的应用</p>
<h2 id="1-3-React的特点"><a href="#1-3-React的特点" class="headerlink" title="1.3 React的特点"></a>1.3 React的特点</h2><pre><code class="hljs">1. 采用组件化模式、声明式编码，提高开发效率及组件复用率
2. 在 React Native中可以使用React语法进行移动端开发
3. 使用虚拟DOM+Diff算法，尽量减少与真实DOM的交互
</code></pre>
<h2 id="1-4-React高效的原因"><a href="#1-4-React高效的原因" class="headerlink" title="1.4. React高效的原因"></a>1.4. React高效的原因</h2><pre><code class="hljs">1. 使用虚拟(virtual)DOM, 不总是直接操作页面真实DOM。

2. DOM Diffing算法, 最小化页面重绘。
</code></pre>
<h1 id="2-Hello-React"><a href="#2-Hello-React" class="headerlink" title="2. Hello React"></a>2. Hello React</h1><h2 id="2-1-相关库介绍"><a href="#2-1-相关库介绍" class="headerlink" title="2.1 相关库介绍"></a>2.1 相关库介绍</h2><pre><code class="hljs">• 旧版本 16.8.4 (March 5, 2019)
• 新版本 有不一样的会说明

1. react.js：React核心库。
2. react-dom.js：提供操作DOM的React扩展库。
3. babel.min.js：解析JSX语法代码转为JS代码的库。
</code></pre>
<h2 id="【补充】babel-js的作用"><a href="#【补充】babel-js的作用" class="headerlink" title="【补充】babel.js的作用"></a>【补充】babel.js的作用</h2><pre><code class="hljs">1. 浏览器不能直接解析JSX代码, 需要babel转译为纯JS的代码才能运行
2. 只要用了JSX，都要加上type=&quot;text/babel&quot;, 声明需要babel来处理
</code></pre>
<h2 id="2-2-使用JSX创建虚拟DOM"><a href="#2-2-使用JSX创建虚拟DOM" class="headerlink" title="2.2 使用JSX创建虚拟DOM"></a>2.2 使用JSX创建虚拟DOM</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs react">const VDOM= &lt;h1&gt;Hello,React&lt;/h1&gt;<br></code></pre></td></tr></table></figure>
<h2 id="2-3-渲染虚拟DOM-元素"><a href="#2-3-渲染虚拟DOM-元素" class="headerlink" title="2.3 渲染虚拟DOM(元素)"></a>2.3 渲染虚拟DOM(元素)</h2><pre><code class="hljs">1. 语法: 
</code></pre>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs react">ReactDOM.render(virtualDOM, containerDOM)<br></code></pre></td></tr></table></figure>

<pre><code class="hljs">2. 作用: 将虚拟DOM元素渲染到页面中的真实容器DOM中显示


3. 参数说明 

    1. 参数一: 纯js或jsx创建的虚拟dom对象
    
    2. 参数二: 用来包含虚拟DOM元素的真实dom元素对象(一般是一个div)
</code></pre>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs javaScript">&lt;!<span class="hljs-variable constant_">DOCTYPE</span> html&gt;<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>hello_react<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-comment">&lt;!-- 准备好一个“容器” --&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;test&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">  <span class="hljs-comment">&lt;!-- 引入react核心库 --&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;../js/react.development.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-comment">&lt;!-- 引入react-dom，用于支持react操作DOM --&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;../js/react-dom.development.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-comment">&lt;!-- 引入babel，用于将jsx转为js --&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;../js/babel.min.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/babel&quot;</span>&gt;</span><span class="language-javascript"> <span class="hljs-comment">/* 此处一定要写babel */</span></span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-comment">//1.创建虚拟DOM</span></span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">VDOM</span> = <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello,React<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span> <span class="hljs-comment">/* 此处一定不要写引号，因为不是字符串 */</span></span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-comment">//2.渲染虚拟DOM到页面</span></span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">render</span>(<span class="hljs-variable constant_">VDOM</span>,<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;test&#x27;</span>))</span></span><br><span class="language-javascript"><span class="language-xml">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span><br></code></pre></td></tr></table></figure>
<h2 id="2-4-页面显示"><a href="#2-4-页面显示" class="headerlink" title="2.4 页面显示"></a>2.4 页面显示</h2><img width="451" alt="image" src="https://user-images.githubusercontent.com/117837871/216939381-0451d71f-c024-46bf-8fb1-ff25e775c093.png" srcset="/img/loading.gif" lazyload>

<h1 id="3-创建虚拟DOM的两种方式"><a href="#3-创建虚拟DOM的两种方式" class="headerlink" title="3. 创建虚拟DOM的两种方式"></a>3. 创建虚拟DOM的两种方式</h1><h2 id="3-1-纯JS方式-一般不用"><a href="#3-1-纯JS方式-一般不用" class="headerlink" title="3.1 纯JS方式(一般不用)"></a>3.1 纯JS方式(一般不用)</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs javaScript">&lt;div id=<span class="hljs-string">&quot;test&quot;</span>&gt;&lt;/div&gt;<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;../js/react.development.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;../js/react-dom.development.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> &gt;</span><span class="language-javascript"> </span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-comment">//1.创建虚拟DOM</span></span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">VDOM</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&#x27;h1&#x27;</span>,&#123;<span class="hljs-attr">id</span>:<span class="hljs-string">&#x27;title&#x27;</span>&#125;,</span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&#x27;span&#x27;</span>,&#123;&#125;,<span class="hljs-string">&#x27;Hello,React&#x27;</span>))</span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-comment">//2.渲染虚拟DOM到页面</span></span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">render</span>(<span class="hljs-variable constant_">VDOM</span>,<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;test&#x27;</span>))</span></span><br></code></pre></td></tr></table></figure>

<h2 id="3-2-JSX方式"><a href="#3-2-JSX方式" class="headerlink" title="3.2 JSX方式"></a>3.2 JSX方式</h2><pre><code class="hljs">JSX方式就是js创建虚拟DOM的语法糖
</code></pre>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;div id=<span class="hljs-string">&quot;test&quot;</span>&gt;&lt;/div&gt;<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;../js/react.development.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;../js/react-dom.development.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;../js/babel.min.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/babel&quot;</span> &gt;</span><span class="language-javascript"> <span class="hljs-comment">/* 此处一定要写babel */</span></span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-comment">//1.创建虚拟DOM</span></span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">VDOM</span> = (  <span class="hljs-comment">/* 此处一定不要写引号，因为不是字符串 */</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span></span></span></span><br><span class="language-xml"><span class="language-javascript"><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>Hello,React<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span></span></span><br><span class="language-xml"><span class="language-javascript"><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span></span></span><br><span class="language-javascript"><span class="language-xml">    )</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-comment">//2.渲染虚拟DOM到页面</span></span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">render</span>(<span class="hljs-variable constant_">VDOM</span>,<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;test&#x27;</span>))</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>![image](<span class="hljs-attr">https</span>:<span class="hljs-comment">//user-images.githubusercontent.com/117837871/216940180-3b28dbc4-3910-4119-845f-4f3b124ecc95.png)</span><br></code></pre></td></tr></table></figure>

<h1 id="4-虚拟DOM与真实DOM"><a href="#4-虚拟DOM与真实DOM" class="headerlink" title="4. 虚拟DOM与真实DOM"></a>4. 虚拟DOM与真实DOM</h1><p>打印输出虚拟DOM和真实DOM进行比较</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">VDOM</span> = (  <span class="hljs-comment">/* 此处一定不要写引号，因为不是字符串 */</span><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>Hello,React<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br>)<br><span class="hljs-comment">// 渲染虚拟DOM到页面</span><br><span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">render</span>(<span class="hljs-variable constant_">VDOM</span>,<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;test&#x27;</span>))<br>constTDOM= <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;demo&#x27;</span>)<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;虚拟DOM&#x27;</span>,<span class="hljs-variable constant_">VDOM</span>);<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;真实DOM&#x27;</span>,<span class="hljs-variable constant_">TDOM</span>);<br><span class="hljs-keyword">debugger</span>;<br></code></pre></td></tr></table></figure>
<p>看看虚拟DOM身上有哪些属性<br><img width="433" alt="image" src="https://user-images.githubusercontent.com/117837871/216941884-1eb6f1e5-c9f2-429b-b6e0-38214ffd8a06.png" srcset="/img/loading.gif" lazyload></p>
<p>看看真实DOM身上有哪些属性<br><img width="448" alt="image" src="https://user-images.githubusercontent.com/117837871/216941911-7af3b347-61b2-4a52-93a3-c98240f22c6d.png" srcset="/img/loading.gif" lazyload></p>
<pre><code class="hljs">1. 虚拟DOM本质是Object类型的对象（一般对象）

2. 虚拟DOM比较 “轻”，真实DOM比较 “重”，因为虚拟DOM是React内部在用，无需真实DOM上那么多的属性

3. 虚拟DOM最终会被React转化为真实DOM，呈现在页面上
</code></pre>
<h1 id="5-JSX入门"><a href="#5-JSX入门" class="headerlink" title="5. JSX入门"></a>5. JSX入门</h1><h2 id="5-1-概述"><a href="#5-1-概述" class="headerlink" title="5.1 概述"></a>5.1 概述</h2><pre><code class="hljs">1. 全称: JavaScript XML

2. React定义的一种类似于XML的JS扩展语法: JS + XML本质是React.createElement(component, props, ...children)方法的语法糖

3. 作用: 用来简化创建虚拟DOM 

    1. 写法：var ele = &lt;h1&gt;Hello JSX!&lt;/h1&gt;
    
    2. 注意1：它不是字符串, 也不是HTML/XML标签
    
    3. 注意2：它最终产生的就是一个JS对象
    
4. 标签名任意: HTML标签或其它标签

5. 标签属性任意: HTML标签属性或其它
</code></pre>
<h2 id="5-2-基本语法规则"><a href="#5-2-基本语法规则" class="headerlink" title="5.2 基本语法规则"></a>5.2 基本语法规则</h2><pre><code class="hljs">1. 定义虚拟DOM时，不要写引号。

2. 标签中混入JS表达式时要用 &#123; &#125;。

3. 样式的类名指定不要用 class，要用 className。（因为class是ES6中类的关键字，所以不让用）

4. 内联样式，要用 style=&#123;&#123; key:value &#125;&#125; 的形式去写。

5. 只有一个根标签

6. 标签必须闭合

7. 标签首字母 

    1. 若小写字母开头，则将该标签转为html中同名元素，若html中无该标签对应的同名元素，则报错。

    2. 若大写字母开头，React就去渲染对应的组件，若组件没有定义，则报错。
    
</code></pre>
<h2 id="【补充】-区分js表达式与js语句"><a href="#【补充】-区分js表达式与js语句" class="headerlink" title="【补充】 区分js表达式与js语句"></a>【补充】 区分js表达式与js语句</h2><pre><code class="hljs">1. 表达式：一个表达式会产生一个值，可以放在任何一个需要值的地方，下面这些都是表达式：

    1. a
    
    2. a+b
    
    3. demo(1) // 函数调用表达式
    
    4. arr.map()
    
    5. function test () &#123;&#125;
    
2. 语句(代码)，下面这些都是语句(代码)：【控制语句，控制代码走向，而不是产生值】

    1. if()&#123; &#125;
    
    2. for()&#123; &#125;
    
    3. switch( )&#123;case:xxxx&#125;
    
</code></pre>
<h2 id="5-3-总结"><a href="#5-3-总结" class="headerlink" title="5.3 总结"></a>5.3 总结</h2><pre><code class="hljs">1. 遇到 &lt; 开头的代码, 以标签的语法解析: html同名标签转换为html同名元素, 其它标签需要特别解析

2. 遇到以 &#123; 开头的代码，以JS语法解析: 标签中的js表达式必须用&#123; &#125;包含
</code></pre>
<h1 id="【React】面向组件编程-基本理解和使用-组件三大核心属性state-props-refs-事件处理-非受控组件-受控组件-高阶函数"><a href="#【React】面向组件编程-基本理解和使用-组件三大核心属性state-props-refs-事件处理-非受控组件-受控组件-高阶函数" class="headerlink" title="【React】面向组件编程 - 基本理解和使用 - 组件三大核心属性state-props-refs - 事件处理 - 非受控组件 - 受控组件 - 高阶函数"></a>【React】面向组件编程 - 基本理解和使用 - 组件三大核心属性state-props-refs - 事件处理 - 非受控组件 - 受控组件 - 高阶函数</h1><h2 id="1-基本理解和使用"><a href="#1-基本理解和使用" class="headerlink" title="1 . 基本理解和使用"></a>1 . 基本理解和使用</h2><h3 id="1-1-函数式组件"><a href="#1-1-函数式组件" class="headerlink" title="1.1 函数式组件"></a>1.1 函数式组件</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//创建函数式组件</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">MyCompontent</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>);<span class="hljs-comment">//这里的this是undefined，因为babel编译后开启了严格模式</span><br>    <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>我是用函数定义的组件（适用于简单组件的定义）<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br>&#125;<br><span class="hljs-comment">//渲染组件到页面</span><br><span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">render</span>(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">MyCompontent</span>/&gt;</span></span>,docement.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;test&#x27;</span>))<br></code></pre></td></tr></table></figure>
<p><img src="https://user-images.githubusercontent.com/117837871/217765611-333f4b51-104d-478c-a907-c875c5ba30e0.png" srcset="/img/loading.gif" lazyload alt="image"></p>
<pre><code class="hljs">执行了ReactDOM.render(&lt;MyComponent/&gt;.......之后，发生了什么？

React解析组件标签，找到了MyComponent组件。

发现组件是使用函数定义的，随后调用该函数，将返回的虚拟DOM转为真实DOM，随后呈现在页面中。
</code></pre>
<p>【补充】严格模式中的this</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">sayThis</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>)<br>&#125;<br><span class="hljs-title function_">sayThis</span>() <span class="hljs-comment">// Window &#123;...&#125;</span><br></code></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">sayThis2</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-string">&#x27;use strict&#x27;</span><br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>)<br>&#125;<br><span class="hljs-title function_">sayThis2</span>() <span class="hljs-comment">// undefined</span><br></code></pre></td></tr></table></figure>

<p>如果不开启严格模式，直接调用函数，函数中的this指向window</p>
<p>如果开启了严格模式，直接调用函数，函数中的this是undefined</p>
<h3 id="1-2-类式组件"><a href="#1-2-类式组件" class="headerlink" title="1.2 类式组件"></a>1.2 类式组件</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//创建类式组件</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyCompontent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.compontent</span> &#123;<br>    <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>)&#123;<br>	    <span class="hljs-comment">//render是放在哪里的？—— MyComponent的原型对象上，供实例使用。</span><br>	    <span class="hljs-comment">//render中的this是谁？—— MyComponent的实例对象 &lt;=&gt; MyComponent组件实例对象。</span><br>        <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>我是用类定义的组件(适用于【复杂组件】的定义)<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br>    &#125;<br>&#125;<br><span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">render</span>(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">MyCompontent</span>/&gt;</span></span>,<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;.test&#x27;</span>))<br></code></pre></td></tr></table></figure>
<p><img src="https://user-images.githubusercontent.com/117837871/217765681-3219dbba-ba4e-430b-89ab-491304411957.png" srcset="/img/loading.gif" lazyload alt="image"><br><img src="https://user-images.githubusercontent.com/117837871/217765719-0818ccdb-4d40-40c7-84ba-1556b6028719.png" srcset="/img/loading.gif" lazyload alt="image"></p>
<pre><code class="hljs">执行了ReactDOM.render(&lt;MyComponent/&gt;.......之后，发生了什么？

React解析组件标签，找到了MyComponent组件。

发现组件是使用类定义的，随后new出来该类的实例，并通过该实例调用到原型上的render方法。

将render返回的虚拟DOM转为真实DOM，随后呈现在页面中。
</code></pre>
<p>【补充】关于ES6中类的注意事项</p>
<p>类中的构造器不是必须要写的，要对实例进行一些初始化的操作，如添加指定属性时才写。</p>
<p>如果A类继承了B类，且A类中写了构造器，那么A类构造器中的super是必须要调用的。</p>
<p>类中所定义的方法，都放在了类的原型对象上，供实例去使用。</p>
<h3 id="1-3-注意"><a href="#1-3-注意" class="headerlink" title="1.3 注意"></a>1.3 注意</h3><p>组件名必须首字母大写</p>
<p>虚拟DOM元素只能有一个根元素</p>
<p>虚拟DOM元素必须有结束标签</p>
<p>重点关注下渲染类组件标签的基本流程</p>
<ul>
<li>React内部会创建组件实例对象</li>
<li>调用render()得到虚拟DOM, 并解析为真实DOM</li>
<li>插入到指定的页面元素内部</li>
</ul>
<h2 id="2-组件实例的三大核心属性1-state-状态"><a href="#2-组件实例的三大核心属性1-state-状态" class="headerlink" title="2. 组件实例的三大核心属性1: state 状态"></a>2. 组件实例的三大核心属性1: state 状态</h2><h3 id="2-1-理解"><a href="#2-1-理解" class="headerlink" title="2.1 理解"></a>2.1 理解</h3><p>state是组件对象最重要的属性, 值是对象(可以包含多个key-value的组合)</p>
<p>组件被称为”状态机”, 通过更新组件的state来更新对应的页面显示(重新渲染组件)</p>
<h3 id="2-2-应用"><a href="#2-2-应用" class="headerlink" title="2.2 应用"></a>2.2 应用</h3><p>需求: 定义一个展示天气信息的组件</p>
<p>默认展示天气炎热 或 凉爽</p>
<p>点击文字切换天气</p>
<h4 id="2-2-1-手动切换版"><a href="#2-2-1-手动切换版" class="headerlink" title="2.2.1 手动切换版"></a>2.2.1 手动切换版</h4><p>类式组件，在构造器中 初始化状态，在render中通过this.state 读取状态</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Weather</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Copmpontent</span>&#123;<br>    <span class="hljs-title function_">contructor</span>(<span class="hljs-params">prop</span>)&#123;<br>        <span class="hljs-variable language_">super</span>(prop);<br>        <span class="hljs-comment">//初始化状态</span><br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = &#123;<br>            <span class="hljs-attr">isHot</span>: <span class="hljs-literal">true</span><br>        &#125;<br>    &#125;<br>    <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>)&#123;<br>        <span class="hljs-comment">//读取状态</span><br>        <span class="hljs-keyword">const</span> &#123;isHot&#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span><br>        <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>今天天气很&#123;isHot ? &#x27;炎热&#x27; : &#x27;凉爽&#x27;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br>    &#125;<br>&#125;<br><span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">render</span>(<span class="hljs-string">&#x27;&lt;Weather/&gt;&#x27;</span>,docement.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;.test&#x27;</span>));<br></code></pre></td></tr></table></figure>
<p><img src="https://user-images.githubusercontent.com/117837871/217765896-b98139ee-c913-4141-9b3f-52c687cd07c8.png" srcset="/img/loading.gif" lazyload alt="image"></p>
<p>【补充】原生JavaScript绑定事件监听的三种方式</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;button id=<span class="hljs-string">&quot;btn1&quot;</span>&gt;按钮<span class="hljs-number">1</span>&lt;/button&gt;<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;btn2&quot;</span>&gt;</span>按钮2<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;demo()&quot;</span>&gt;</span>按钮3<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> &gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-keyword">const</span> btn1 = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;btn1&#x27;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">  btn1.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;click&#x27;</span>,<span class="hljs-function">()=&gt;</span>&#123;</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;按钮1被点击了&#x27;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">  &#125;)</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-keyword">const</span> btn2 = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;btn2&#x27;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">  btn2.<span class="hljs-property">onclick</span> = <span class="hljs-function">()=&gt;</span>&#123;</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;按钮2被点击了&#x27;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">  &#125;</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-keyword">function</span> <span class="hljs-title function_">demo</span>(<span class="hljs-params"></span>)&#123;</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;按钮3被点击了&#x27;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">  &#125;</span></span><br><span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure>

<p>【补充】类中方法的this指向问题</p>
<p>类中定义的方法，在内部默认开启了局部的严格模式</p>
<p>开启严格模式，函数如果直接调用，this不会指向window，而是undefined</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name,age</span>)&#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age<br>  &#125;<br>  <span class="hljs-title function_">study</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-comment">//study方法放在了哪里？——类的原型对象上，供实例使用</span><br>    <span class="hljs-comment">//通过Person实例调用study时，study中的this就是Person实例</span><br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>);<br>  &#125;<br>&#125;<br><span class="hljs-keyword">const</span> p1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">&#x27;tom&#x27;</span>,<span class="hljs-number">18</span>)<br>p1.<span class="hljs-title function_">study</span>() <span class="hljs-comment">//通过实例调用study方法  Person</span><br><span class="hljs-keyword">const</span> x = p1.<span class="hljs-property">study</span><br><span class="hljs-title function_">x</span>() <span class="hljs-comment">// 直接调用 undefined</span><br></code></pre></td></tr></table></figure>
<h4 id="2-2-2-点击切换版’"><a href="#2-2-2-点击切换版’" class="headerlink" title="2.2.2 点击切换版’"></a>2.2.2 点击切换版’</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 1.创建组件</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Weather</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>	<br>  <span class="hljs-comment">// 构造器调用几次？ ———— 1次</span><br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">props</span>)&#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;constructor&#x27;</span>);<br>    <span class="hljs-variable language_">super</span>(props)<br>    <span class="hljs-comment">// 初始化状态</span><br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = &#123;<span class="hljs-attr">isHot</span>:<span class="hljs-literal">false</span>,<span class="hljs-attr">wind</span>:<span class="hljs-string">&#x27;微风&#x27;</span>&#125;<br>    <span class="hljs-comment">// 解决 changeWeather 中 this 指向问题</span><br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">changeWeather</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">changeWeather</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>)<br>  &#125;<br><br>  <span class="hljs-comment">// render调用几次？ ———— 1+n次 1是初始化的那次 n是状态更新的次数</span><br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;render&#x27;</span>);<br>    <span class="hljs-comment">//读取状态</span><br>    <span class="hljs-keyword">const</span> &#123;isHot,wind&#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span><br>    <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;this.changeWeather&#125;</span>&gt;</span>今天天气很&#123;isHot ? &#x27;炎热&#x27; : &#x27;凉爽&#x27;&#125;，&#123;wind&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br>  &#125;<br><br>  <span class="hljs-comment">// changeWeather调用几次？ ———— 点几次调几次</span><br>  <span class="hljs-title function_">changeWeather</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-comment">// changeWeather放在哪里？ ———— Weather的原型对象上，供实例使用</span><br>    <span class="hljs-comment">// 由于changeWeather是作为onClick的回调，所以不是通过实例调用的，是直接调用</span><br>    <span class="hljs-comment">// 类中的方法默认开启了局部的严格模式，所以changeWeather中的this为undefined</span><br><br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;changeWeather&#x27;</span>);<br>    <span class="hljs-comment">// 获取原来的isHot值</span><br>    <span class="hljs-keyword">const</span> isHot = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">isHot</span><br>    <span class="hljs-comment">// 严重注意：状态必须通过setState进行更新,且更新是一种合并，不是替换。</span><br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123;<span class="hljs-attr">isHot</span>:!isHot&#125;)<br>    <span class="hljs-comment">// console.log(this);</span><br><br>    <span class="hljs-comment">// 严重注意：状态(state)不可直接更改，下面这行就是直接更改！！！</span><br>    <span class="hljs-comment">// this.state.isHot = !isHot //这是错误的写法</span><br>  &#125;<br>&#125;<br><span class="hljs-comment">//2.渲染组件到页面</span><br><span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">render</span>(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Weather</span>/&gt;</span></span>,<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;test&#x27;</span>))<br></code></pre></td></tr></table></figure>
<p><img src="https://user-images.githubusercontent.com/117837871/217765963-ceed33e2-9a84-4e6e-b591-ee0873ff1c45.png" srcset="/img/loading.gif" lazyload alt="image"></p>
<h4 id="2-2-3-精简代码（实际开发中这样写）"><a href="#2-2-3-精简代码（实际开发中这样写）" class="headerlink" title="2.2.3 精简代码（实际开发中这样写）"></a>2.2.3 精简代码（实际开发中这样写）</h4><p>可以不写构造器，类中直接写赋值语句来初始化状态</p>
<p>不用bind来绑定this（赋值语句的形式+箭头函数）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 1.创建组件</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Weather</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span>&#123;<br>  <span class="hljs-comment">// 初始化状态</span><br>  state = &#123;<span class="hljs-attr">isHot</span>:<span class="hljs-literal">false</span>,<span class="hljs-attr">wind</span>:<span class="hljs-string">&#x27;微风&#x27;</span>&#125;<br><br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-keyword">const</span> &#123;isHot,wind&#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span><br>    <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;this.changeWeather&#125;</span>&gt;</span>今天天气很&#123;isHot ? &#x27;炎热&#x27; : &#x27;凉爽&#x27;&#125;，&#123;wind&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br>  &#125;<br><br>  <span class="hljs-comment">// 自定义方法————要用赋值语句的形式 + 箭头函数</span><br>  <span class="hljs-comment">// 没有放在原型上，而是放在实例上</span><br>  changeWeather = <span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> isHot = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">isHot</span><br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123;<span class="hljs-attr">isHot</span>:!isHot&#125;)<br>  &#125;<br>&#125;<br><span class="hljs-comment">// 2.渲染组件到页面</span><br><span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">render</span>(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Weather</span>/&gt;</span></span>,<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;test&#x27;</span>))<br></code></pre></td></tr></table></figure>
<p>【补充】类中直接写赋值语句</p>
<p>在类中直接写赋值语句，等于是给类的实例对象添加属性且赋值</p>
<h2 id="2-3-注意"><a href="#2-3-注意" class="headerlink" title="#2.3 注意"></a>#2.3 注意</h2><p>组件中render方法中的this为组件实例对象</p>
<p>组件自定义的方法中this为undefined，如何解决？</p>
<pre><code class="hljs">a)	强制绑定this: 通过函数对象的bind()

b)	箭头函数 + 赋值语句
</code></pre>
<p>状态数据state，不能直接修改或更新。状态必须通过  setState() 进行更新, 且更新是一种合并，不是替换。</p>
<h2 id="3-组件实例的三大核心属性2-props"><a href="#3-组件实例的三大核心属性2-props" class="headerlink" title="3. 组件实例的三大核心属性2: props"></a>3. 组件实例的三大核心属性2: props</h2><h3 id="3-1-理解"><a href="#3-1-理解" class="headerlink" title="3.1 理解"></a>3.1 理解</h3><p>每个组件对象都会有props(properties的简写)属性</p>
<p>组件标签的所有属性都保存在props中</p>
<h3 id="3-2-作用"><a href="#3-2-作用" class="headerlink" title="3.2 作用"></a>3.2 作用</h3><p>通过标签属性从组件外向组件内传递变化的数据</p>
<p>注意: 组件内部不可修改props数据，是只读的</p>
<h3 id="3-3-尝试一下"><a href="#3-3-尝试一下" class="headerlink" title="3.3 尝试一下"></a>3.3 尝试一下</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 创建组件 </span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span>&#123;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">//const &#123;name, sex, age&#125; = this.props </span><br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span></span><br><span class="language-xml">        &#123;/* <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>姓名：&#123;name&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span> </span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>性别：&#123;sex&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span> </span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>年龄：&#123;age&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>  */&#125;</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>姓名：&#123;this.props.name&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span> </span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>性别：&#123;this.props.sex&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span> </span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>年龄：&#123;this.props.age&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br><span class="hljs-comment">// 渲染组件到页面上</span><br><span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">render</span>(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Person</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;yk&quot;</span> <span class="hljs-attr">age</span>=<span class="hljs-string">&quot;18&quot;</span> <span class="hljs-attr">sex</span>=<span class="hljs-string">&quot;男&quot;</span>/&gt;</span></span>, <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;test&#x27;</span>))<br></code></pre></td></tr></table></figure>
<p><img src="https://user-images.githubusercontent.com/117837871/217766032-9d58d0cf-c11c-44d5-8a96-8d2d1681b4c0.png" srcset="/img/loading.gif" lazyload alt="image"></p>
<h3 id="3-4-使用指南"><a href="#3-4-使用指南" class="headerlink" title="3.4 使用指南"></a>3.4 使用指南</h3><h4 id="3-4-1-内部读取某个属性值"><a href="#3-4-1-内部读取某个属性值" class="headerlink" title="3.4.1 内部读取某个属性值"></a>3.4.1 内部读取某个属性值</h4><p>this.props.name</p>
<h3 id="3-4-2-扩展属性-将对象的所有属性通过props传递（批量传递标签属性）"><a href="#3-4-2-扩展属性-将对象的所有属性通过props传递（批量传递标签属性）" class="headerlink" title="3.4.2 扩展属性: 将对象的所有属性通过props传递（批量传递标签属性）"></a>3.4.2 扩展属性: 将对象的所有属性通过props传递（批量传递标签属性）</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">render</span>(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Person</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;yk&quot;</span> <span class="hljs-attr">age</span>=<span class="hljs-string">&quot;18&quot;</span> <span class="hljs-attr">sex</span>=<span class="hljs-string">&quot;男&quot;</span>/&gt;</span></span>, <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;test&#x27;</span>))<br><br><span class="hljs-keyword">const</span> person = &#123;<span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;yk&#x27;</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">18</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">&#x27;男&#x27;</span>&#125;<br><br><span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">render</span>(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Person</span> &#123; <span class="hljs-attr">...person</span> &#125;/&gt;</span></span>, <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;test&#x27;</span>))<br></code></pre></td></tr></table></figure>

<p>【补充】展开运算符</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><br><span class="hljs-keyword">let</span> arr1 = [<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>, <span class="hljs-number">9</span>]<br><br><span class="hljs-keyword">let</span> arr2 = [<span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>, <span class="hljs-number">8</span>, <span class="hljs-number">10</span>]<br><br><span class="hljs-comment">// 1. 展开一个数组</span><br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(...arr1); <span class="hljs-comment">// 1 3 5 7 9</span><br><br><span class="hljs-comment">// 2. 连接数组</span><br><br><span class="hljs-keyword">let</span> arr3 = [...arr1, ...arr2] <span class="hljs-comment">// [1,3,5,7,9,2,4,6,8,10]</span><br><br><span class="hljs-comment">// 3. 在函数中使用</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">sum</span>(<span class="hljs-params">...numbers</span>) &#123;<br>    <span class="hljs-comment">//求和！preValue前一个数，currentValue当前数</span><br>  <span class="hljs-keyword">return</span> numbers.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">preValue, currentValue</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">return</span> preValue + currentValue<br>  &#125;)<br>&#125;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">sum</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>)); <span class="hljs-comment">// 10</span><br><br><span class="hljs-comment">// 4. 构造字面量对象时使用展开语法</span><br><span class="hljs-keyword">let</span> person = &#123;<br>  <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;tom&#x27;</span>,<br>  <span class="hljs-attr">age</span>: <span class="hljs-number">18</span><br>&#125;<br><br><span class="hljs-comment">// console.log(...person); // 报错，展开运算符不能展开对象</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(&#123;...person&#125;) <span class="hljs-comment">// &#123;name: &quot;tom&quot;, age: 18&#125;</span><br><span class="hljs-comment">//babel+react使得可以使用展开运算符，但仅仅实用于标签属性的传递，如下⬇️</span><br><span class="hljs-keyword">let</span> person2 = &#123; ...person &#125; <span class="hljs-comment">// 可以拷贝一个对象</span><br>person.<span class="hljs-property">name</span> = <span class="hljs-string">&#x27;jerry&#x27;</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(person2); <span class="hljs-comment">// &#123;name: &quot;tom&quot;, age: 18&#125;</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(person); <span class="hljs-comment">// &#123;name: &quot;jerry&quot;, age: 18&#125;</span><br><br><span class="hljs-comment">// 5. 合并对象</span><br><span class="hljs-keyword">let</span> person3 = &#123;<br>  ...person,<br>  <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;trumen&#x27;</span>,<br>  <span class="hljs-attr">address</span>: <span class="hljs-string">&quot;上海&quot;</span><br>&#125;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(person3); <span class="hljs-comment">// &#123;name: &quot;trumen&quot;, age: 18, address: &quot;上海&quot;&#125;</span><br></code></pre></td></tr></table></figure>

<h3 id="3-4-3-对props中的属性值进行类型限制和必要性限制"><a href="#3-4-3-对props中的属性值进行类型限制和必要性限制" class="headerlink" title="3.4.3 对props中的属性值进行类型限制和必要性限制"></a>3.4.3 对props中的属性值进行类型限制和必要性限制</h3><ul>
<li><ol>
<li>第一种方式（React v15.5 开始已弃用）</li>
</ol>
</li>
</ul>
<p>直接写</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-title class_">Person</span>.<span class="hljs-property">propTypes</span> = &#123;<br>  <span class="hljs-attr">name</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">PropTypes</span>.<span class="hljs-property">string</span>.<span class="hljs-property">isRequired</span>,<br>  <span class="hljs-attr">age</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">PropTypes</span>.<span class="hljs-property">number</span><br>&#125;<br></code></pre></td></tr></table></figure>

<ul>
<li><ol start="2">
<li>第二种方式（新）：使用prop-types库进限制（需要引入prop-types库）</li>
</ol>
</li>
</ul>
<!-- 引入prop-types，用于对组件标签属性进行限制 -->

<script type="text/javascript" src="../js/prop-types.js"></script>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//对标签属性进行类型、必要性的限制</span><br><span class="hljs-title class_">Person</span>.<span class="hljs-property">propTypes</span> = &#123;<br>  <span class="hljs-attr">name</span>:<span class="hljs-title class_">PropTypes</span>.<span class="hljs-property">string</span>.<span class="hljs-property">isRequired</span>, <span class="hljs-comment">// 限制name必传，且为字符串</span><br>  <span class="hljs-attr">sex</span>:<span class="hljs-title class_">PropTypes</span>.<span class="hljs-property">string</span>, <span class="hljs-comment">// 限制sex为字符串</span><br>  <span class="hljs-attr">age</span>:<span class="hljs-title class_">PropTypes</span>.<span class="hljs-property">number</span>, <span class="hljs-comment">// 限制age为数值</span><br>  <span class="hljs-attr">speak</span>:<span class="hljs-title class_">PropTypes</span>.<span class="hljs-property">func</span>, <span class="hljs-comment">// 限制speak为函数</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p>可以写在类的里面，前面加static关键字</p>
<h4 id="3-4-4-默认属性值"><a href="#3-4-4-默认属性值" class="headerlink" title="3.4.4 默认属性值"></a>3.4.4 默认属性值</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//指定默认标签属性值</span><br><br><span class="hljs-title class_">Person</span>.<span class="hljs-property">defaultProps</span> = &#123;<br>  <span class="hljs-attr">sex</span>:<span class="hljs-string">&#x27;男&#x27;</span>, <span class="hljs-comment">// sex默认值为男</span><br>  <span class="hljs-attr">age</span>:<span class="hljs-number">18</span> <span class="hljs-comment">//age默认值为18</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p>可以写在类的里面，前面加static关键字</p>
<h4 id="3-4-5-组件类的构造函数"><a href="#3-4-5-组件类的构造函数" class="headerlink" title="3.4.5 组件类的构造函数"></a>3.4.5 组件类的构造函数</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-title function_">constructor</span>(<span class="hljs-params">props</span>)&#123;<br>  <span class="hljs-variable language_">super</span>(props)<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>)<span class="hljs-comment">//打印所有属性</span><br>&#125;<br></code></pre></td></tr></table></figure>

<ul>
<li>构造器是否接收props，是否传递给super，取决于：是否希望在构造器中通过this访问props</li>
</ul>
<h3 id="3-5-应用"><a href="#3-5-应用" class="headerlink" title="3.5 应用"></a>3.5 应用</h3><p>需求: 自定义用来显示一个人员信息的组件</p>
<p>姓名必须指定，且为字符串类型；</p>
<p>性别为字符串类型，如果性别没有指定，默认为男</p>
<p>年龄为数字类型，默认值为18</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//创建组件</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span>&#123;<br><br>  <span class="hljs-comment">//对标签属性进行类型、必要性的限制</span><br>  <span class="hljs-keyword">static</span> propTypes = &#123;<br>    <span class="hljs-attr">name</span>:<span class="hljs-title class_">PropTypes</span>.<span class="hljs-property">string</span>.<span class="hljs-property">isRequired</span>, <span class="hljs-comment">//限制name必传，且为字符串</span><br>    <span class="hljs-attr">sex</span>:<span class="hljs-title class_">PropTypes</span>.<span class="hljs-property">string</span>,<span class="hljs-comment">//限制sex为字符串</span><br>    <span class="hljs-attr">age</span>:<span class="hljs-title class_">PropTypes</span>.<span class="hljs-property">number</span>,<span class="hljs-comment">//限制age为数值</span><br>  &#125;<br><br>  <span class="hljs-comment">//指定默认标签属性值</span><br>  <span class="hljs-keyword">static</span> defaultProps = &#123;<br>    <span class="hljs-attr">sex</span>:<span class="hljs-string">&#x27;男&#x27;</span>,<span class="hljs-comment">//sex默认值为男</span><br>    <span class="hljs-attr">age</span>:<span class="hljs-number">18</span> <span class="hljs-comment">//age默认值为18</span><br>  &#125;<br><br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-comment">// console.log(this);</span><br>    <span class="hljs-keyword">const</span> &#123;name,age,sex&#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span><br>    <span class="hljs-comment">//props是只读的</span><br>    <span class="hljs-comment">//this.props.name = &#x27;jack&#x27; //此行代码会报错，因为props是只读的</span><br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>姓名：&#123;name&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>性别：&#123;sex&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>年龄：&#123;age+1&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br><br><span class="hljs-comment">//渲染组件到页面</span><br><span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">render</span>(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Person</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;jerry&quot;</span>/&gt;</span></span>,<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;test1&#x27;</span>))<br></code></pre></td></tr></table></figure>

<h3 id="3-6-函数式组件使用props"><a href="#3-6-函数式组件使用props" class="headerlink" title="3.6 函数式组件使用props"></a>3.6 函数式组件使用props</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//创建组件</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Person</span> (props)&#123;<br>  <span class="hljs-keyword">const</span> &#123;name,age,sex&#125; = props<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>姓名：&#123;name&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>性别：&#123;sex&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>年龄：&#123;age&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br>    )<br>&#125;<br><br><span class="hljs-comment">//对标签属性进行类型、必要性的限制</span><br><span class="hljs-title class_">Person</span>.<span class="hljs-property">propTypes</span> = &#123;<br>  <span class="hljs-attr">name</span>:<span class="hljs-title class_">PropTypes</span>.<span class="hljs-property">string</span>.<span class="hljs-property">isRequired</span>, <span class="hljs-comment">//限制name必传，且为字符串</span><br>  <span class="hljs-attr">sex</span>:<span class="hljs-title class_">PropTypes</span>.<span class="hljs-property">string</span>,  <span class="hljs-comment">//限制sex为字符串</span><br>  <span class="hljs-attr">age</span>:<span class="hljs-title class_">PropTypes</span>.<span class="hljs-property">number</span>,  <span class="hljs-comment">//限制age为数值</span><br>&#125;<br><br><span class="hljs-comment">// 指定默认标签属性值</span><br><span class="hljs-title class_">Person</span>.<span class="hljs-property">defaultProps</span> = &#123;<br>  <span class="hljs-attr">sex</span>:<span class="hljs-string">&#x27;男&#x27;</span>,<span class="hljs-comment">// sex默认值为男</span><br>  <span class="hljs-attr">age</span>:<span class="hljs-number">18</span> <span class="hljs-comment">// age默认值为18</span><br>&#125;<br><br><span class="hljs-comment">//渲染组件到页面</span><br><span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">render</span>(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Person</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;jerry&quot;</span>/&gt;</span></span>,<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;test1&#x27;</span>))<br></code></pre></td></tr></table></figure>

<h2 id="4-组件三大核心属性3-refs与事件处理"><a href="#4-组件三大核心属性3-refs与事件处理" class="headerlink" title="4. 组件三大核心属性3: refs与事件处理"></a>4. 组件三大核心属性3: refs与事件处理</h2><h3 id="4-1-理解"><a href="#4-1-理解" class="headerlink" title="4.1 理解"></a>4.1 理解</h3><p>组件内的标签可以定义ref属性来标识自己</p>
<h3 id="4-2-应用"><a href="#4-2-应用" class="headerlink" title="4.2 应用"></a>4.2 应用</h3><p>需求: 自定义组件, 功能说明如下</p>
<p>点击按钮, 提示第一个输入框中的值</p>
<p>当第2个输入框失去焦点时, 提示这个输入框中的值</p>
<h2 id="4-3-编码"><a href="#4-3-编码" class="headerlink" title="4.3 编码"></a>4.3 编码</h2><h3 id="4-3-1-字符串形式的ref（-新版本不推荐使用了-）"><a href="#4-3-1-字符串形式的ref（-新版本不推荐使用了-）" class="headerlink" title="4.3.1 字符串形式的ref（** 新版本不推荐使用了 **）"></a>4.3.1 字符串形式的ref（** 新版本不推荐使用了 **）</h3><ol>
<li><p>定义</p>
<input ref="input1"/>
</li>
<li><p>使用<br>this.refs.input1</p>
</li>
<li><p>示例</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//创建组件</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span>&#123;<br>  <span class="hljs-comment">//展示左侧输入框的数据</span><br>  showData = <span class="hljs-function">()=&gt;</span>&#123;<br>    <span class="hljs-keyword">const</span> &#123;input1&#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">refs</span><br>    <span class="hljs-title function_">alert</span>(input1.<span class="hljs-property">value</span>)<br>  &#125;<br>  <span class="hljs-comment">//展示右侧输入框的数据</span><br>  showData2 = <span class="hljs-function">()=&gt;</span>&#123;<br>    <span class="hljs-keyword">const</span> &#123;input2&#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">refs</span><br>    <span class="hljs-title function_">alert</span>(input2.<span class="hljs-property">value</span>)<br>  &#125;<br>  <br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-keyword">return</span>(<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;input1&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;点击按钮提示数据&quot;</span>/&gt;</span><span class="hljs-symbol">&amp;nbsp;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;this.showData&#125;</span>&gt;</span>点我提示左侧的数据<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><span class="hljs-symbol">&amp;nbsp;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;input2&quot;</span> <span class="hljs-attr">onBlur</span>=<span class="hljs-string">&#123;this.showData2&#125;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;失去焦点提示数据&quot;</span>/&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br><span class="hljs-comment">//渲染组件到页面</span><br><span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">render</span>(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Demo</span> /&gt;</span></span>,<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;test&#x27;</span>))<br></code></pre></td></tr></table></figure></li>
</ol>
<h3 id="4-3-2-回调形式的ref"><a href="#4-3-2-回调形式的ref" class="headerlink" title="4.3.2 回调形式的ref"></a>4.3.2 回调形式的ref</h3><ol>
<li>定义</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;input ref=&#123;<span class="hljs-function">(<span class="hljs-params">currentNode</span>)=&gt;</span>&#123;<span class="hljs-variable language_">this</span>.<span class="hljs-property">input1</span> = currentNode&#125;&#125; /&gt;<br></code></pre></td></tr></table></figure>

<p>简写一下</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;input ref=&#123; <span class="hljs-function"><span class="hljs-params">c</span> =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">input1</span> = c &#125; /&gt;<br></code></pre></td></tr></table></figure>

<ol start="2">
<li>使用</li>
</ol>
<p>this.input1</p>
<ol start="3">
<li>示例</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//创建组件</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span>&#123;<br>  <span class="hljs-comment">//展示左侧输入框的数据</span><br>  showData = <span class="hljs-function">()=&gt;</span>&#123;<br>    <span class="hljs-comment">//从实例自身取</span><br>    <span class="hljs-keyword">const</span> &#123;input1&#125; = <span class="hljs-variable language_">this</span><br>    <span class="hljs-title function_">alert</span>(input1.<span class="hljs-property">value</span>)<br>  &#125;<br>  <span class="hljs-comment">//展示右侧输入框的数据</span><br>  showData2 = <span class="hljs-function">()=&gt;</span>&#123;<br>    <span class="hljs-keyword">const</span> &#123;input2&#125; = <span class="hljs-variable language_">this</span><br>    <span class="hljs-title function_">alert</span>(input2.<span class="hljs-property">value</span>)<br>  &#125;<br>  <br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-keyword">return</span>(<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&#123;</span> <span class="hljs-attr">c</span> =&gt;</span> this.input1 = c &#125; type=&quot;text&quot; placeholder=&quot;点击按钮提示数据&quot;/&gt;<span class="hljs-symbol">&amp;nbsp;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;this.showData&#125;</span>&gt;</span>点我提示左侧的数据<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><span class="hljs-symbol">&amp;nbsp;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">onBlur</span>=<span class="hljs-string">&#123;this.showData2&#125;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&#123;c</span> =&gt;</span> this.input2 = c &#125; type=&quot;text&quot; placeholder=&quot;失去焦点提示数据&quot;/&gt;<span class="hljs-symbol">&amp;nbsp;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br><span class="hljs-comment">//渲染组件到页面</span><br><span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">render</span>(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Demo</span> /&gt;</span></span>,<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;test&#x27;</span>))<br></code></pre></td></tr></table></figure>

<ol start="4">
<li>回调执行次数</li>
</ol>
<p><img src="https://user-images.githubusercontent.com/117837871/218298374-9f3931c3-ea0d-45a5-80c2-cd4b15e1a51f.png" srcset="/img/loading.gif" lazyload alt="image"></p>
<p><img src="https://user-images.githubusercontent.com/117837871/218298384-a6b30e7b-a208-408e-b0ca-27d979d71fe6.png" srcset="/img/loading.gif" lazyload alt="image"></p>
<p>内联的回调，渲染时调用一次，每次更新都会执行两次</p>
<p>类绑定的回调，就在初始渲染时调用一次</p>
<p>影响不大，日常开发基本都用内联，方便一点</p>
<h3 id="4-3-3-createRef创建ref容器"><a href="#4-3-3-createRef创建ref容器" class="headerlink" title="4.3.3 createRef创建ref容器"></a>4.3.3 createRef创建ref容器</h3><ol>
<li>定义</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// React.createRef调用后可以返回一个容器</span><br><span class="hljs-comment">// 该容器可以存储被ref所标识的节点,该容器是“专人专用”的</span><br>myRef = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createRef</span>() <br><br>&lt;input ref=&#123;<span class="hljs-variable language_">this</span>.<span class="hljs-property">myRef</span>&#125;/&gt;<br></code></pre></td></tr></table></figure>
<ol start="2">
<li>使用</li>
</ol>
<p>this.myRef.current</p>
<ol start="3">
<li>示例</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//创建组件</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span>&#123;<br><br>  myRef = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createRef</span>()<br>  myRef2 = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createRef</span>()<br>  <span class="hljs-comment">//展示左侧输入框的数据</span><br>  showData = <span class="hljs-function">()=&gt;</span>&#123;<br>    <span class="hljs-title function_">alert</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">myRef</span>.<span class="hljs-property">current</span>.<span class="hljs-property">value</span>);<br>  &#125;<br>  <span class="hljs-comment">//展示右侧输入框的数据</span><br>  showData2 = <span class="hljs-function">()=&gt;</span>&#123;<br>    <span class="hljs-title function_">alert</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">myRef2</span>.<span class="hljs-property">current</span>.<span class="hljs-property">value</span>);<br>  &#125;<br>  <br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-keyword">return</span>(<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&#123;this.myRef&#125;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;点击按钮提示数据&quot;</span>/&gt;</span><span class="hljs-symbol">&amp;nbsp;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;this.showData&#125;</span>&gt;</span>点我提示左侧的数据<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><span class="hljs-symbol">&amp;nbsp;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">onBlur</span>=<span class="hljs-string">&#123;this.showData2&#125;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&#123;this.myRef2&#125;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;失去焦点提示数据&quot;</span>/&gt;</span><span class="hljs-symbol">&amp;nbsp;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br><span class="hljs-comment">//渲染组件到页面</span><br><span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">render</span>(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Demo</span> /&gt;</span></span>,<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;test&#x27;</span>))<br></code></pre></td></tr></table></figure>

<h2 id="5-React中的事件处理"><a href="#5-React中的事件处理" class="headerlink" title="5. React中的事件处理"></a>5. React中的事件处理</h2><p>通过onXxx属性指定事件处理函数(注意大小写)</p>
<p>React使用的是自定义(合成)事件, 而不是使用的原生DOM事件—-为了更好的兼容性</p>
<p>React中的事件是通过事件委托方式处理的(委托给组件最外层的元素) —-为了的高效</p>
<p>通过event.target得到发生事件的DOM元素对象—-不要过度使用ref</p>
<p>发生事件的元素是需要操作的元素时，可以避免使用ref</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//创建组件</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span>&#123;<br><br>  <span class="hljs-comment">//创建ref容器</span><br>  myRef = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createRef</span>()<br>  <span class="hljs-comment">// myRef2 = React.createRef()</span><br><br>  <span class="hljs-comment">//展示左侧输入框的数据</span><br>  showData = <span class="hljs-function">(<span class="hljs-params">event</span>)=&gt;</span>&#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(event.<span class="hljs-property">target</span>); <span class="hljs-comment">// &lt;button&gt;点我提示左侧的数据&lt;/button&gt;</span><br>    <span class="hljs-title function_">alert</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">myRef</span>.<span class="hljs-property">current</span>.<span class="hljs-property">value</span>);<br>  &#125;<br><br>  <span class="hljs-comment">//展示右侧输入框的数据</span><br>  showData2 = <span class="hljs-function">(<span class="hljs-params">event</span>)=&gt;</span>&#123;<br>    <span class="hljs-title function_">alert</span>(event.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>);<br>  &#125;<br><br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-keyword">return</span>(<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&#123;this.myRef&#125;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;点击按钮提示数据&quot;</span>/&gt;</span><span class="hljs-symbol">&amp;nbsp;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;this.showData&#125;</span>&gt;</span>点我提示左侧的数据<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><span class="hljs-symbol">&amp;nbsp;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">onBlur</span>=<span class="hljs-string">&#123;this.showData2&#125;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;失去焦点提示数据&quot;</span>/&gt;</span><span class="hljs-symbol">&amp;nbsp;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br><span class="hljs-comment">//渲染组件到页面</span><br><span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">render</span>(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Demo</span> /&gt;</span></span>,<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;test&#x27;</span>))<br></code></pre></td></tr></table></figure>


<h2 id="6-收集表单数据"><a href="#6-收集表单数据" class="headerlink" title="6. 收集表单数据"></a>6. 收集表单数据</h2><h3 id="6-1-理解"><a href="#6-1-理解" class="headerlink" title="6.1 理解"></a>6.1 理解</h3><p>包含表单的组件分类</p>
<p>受控组件</p>
<p>非受控组件</p>
<h3 id="6-2-应用"><a href="#6-2-应用" class="headerlink" title="6.2 应用"></a>6.2 应用</h3><p>需求:</p>
<p>定义一个包含表单的组件</p>
<p>输入用户名密码后, 点击登录提示输入信息</p>
<h3 id="6-3-非受控组件"><a href="#6-3-非受控组件" class="headerlink" title="6.3 非受控组件"></a>6.3 非受控组件</h3><p>页面中所有输入类DOM的值，都是现用现取的</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 创建组件</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Login</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  handleSubmit = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> &#123;<br>    event.<span class="hljs-title function_">preventDefault</span>() <span class="hljs-comment">// 阻止表单提交</span><br>    <span class="hljs-keyword">const</span> &#123;username, password&#125; = <span class="hljs-variable language_">this</span><br>    <span class="hljs-title function_">alert</span>(<span class="hljs-string">`您输入的用户名是 <span class="hljs-subst">$&#123;username.value&#125;</span>，您输入的密码是：<span class="hljs-subst">$&#123;password.value&#125;</span>`</span>)<br>  &#125;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;https://www.baidu.com/&quot;</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">&#123;this.handleSubmit&#125;</span>&gt;</span></span><br><span class="language-xml">        用户名：<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&#123;c</span> =&gt;</span> this.username = c&#125; type=&quot;text&quot; name=&quot;username&quot; /&gt;</span><br><span class="language-xml">        密码：<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&#123;c</span> =&gt;</span> this.password = c&#125; type=&quot;password&quot; name=&quot;password&quot; /&gt;</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>登录<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>  </span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br><span class="hljs-comment">// 渲染组件</span><br><span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">render</span>(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Login</span> /&gt;</span></span>, <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;test&#x27;</span>))<br></code></pre></td></tr></table></figure>

<h2 id="6-4-受控组件"><a href="#6-4-受控组件" class="headerlink" title="6.4 受控组件"></a>6.4 受控组件</h2><p>页面中输入类的DOM，随着输入的过程，将数据存储在状态state中，需要用的时候在从状态state中取（有点类似Vue中的双向数据绑定）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 创建组件</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Login</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  <span class="hljs-comment">// 初始化状态</span><br>  state = &#123;<br>    <span class="hljs-attr">username</span>: <span class="hljs-string">&#x27;&#x27;</span>,<br>    <span class="hljs-attr">password</span>: <span class="hljs-string">&#x27;&#x27;</span><br>  &#125;<br>  <span class="hljs-comment">// 保存用户名到状态中</span><br>  saveUsername = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123;<span class="hljs-attr">username</span>: event.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>&#125;)<br>  &#125;<br>  <span class="hljs-comment">// 保存密码到状态中</span><br>  savePassword = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123;<span class="hljs-attr">password</span>: event.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>&#125;)<br>  &#125;<br>  <span class="hljs-comment">// 表单提交的回调</span><br>  handleSubmit = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> &#123;<br>    event.<span class="hljs-title function_">preventDefault</span>()<br>    <span class="hljs-keyword">const</span> &#123;username, password&#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span><br>    <span class="hljs-title function_">alert</span>(<span class="hljs-string">`您输入的用户名是 <span class="hljs-subst">$&#123;username&#125;</span>，您输入的密码是：<span class="hljs-subst">$&#123;password&#125;</span>`</span>)<br>  &#125;<br><br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;https://www.baidu.com/&quot;</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">&#123;this.handleSubmit&#125;</span>&gt;</span></span><br><span class="language-xml">        用户名：<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;this.saveUsername&#125;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span> /&gt;</span></span><br><span class="language-xml">        密码：<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;this.savePassword&#125;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> /&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>登录<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>  </span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br><span class="hljs-comment">// 渲染组件</span><br><span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">render</span>(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Login</span> /&gt;</span></span>, <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;test&#x27;</span>))<br></code></pre></td></tr></table></figure>

<h2 id="7-高阶函数与函数的柯里化"><a href="#7-高阶函数与函数的柯里化" class="headerlink" title="7. 高阶函数与函数的柯里化"></a>7. 高阶函数与函数的柯里化</h2><h3 id="7-1-高阶函数"><a href="#7-1-高阶函数" class="headerlink" title="7.1 高阶函数"></a>7.1 高阶函数</h3><p>高阶函数：如果一个函数符合下面2个规范中的任何一个，那该函数就是高阶函数。</p>
<p>若A函数，接收的参数是一个函数，那么A就可以称之为高阶函数。</p>
<p>若A函数，调用的返回值依然是一个函数，那么A就可以称之为高阶函数。</p>
<p>常见的高阶函数有：Promise、setTimeout、arr.map()等等</p>
<h3 id="7-2-函数的柯里化"><a href="#7-2-函数的柯里化" class="headerlink" title="7.2 函数的柯里化"></a>7.2 函数的柯里化</h3><p>函数的柯里化：通过函数调用继续返回函数的方式，实现多次接收参数最后统一处理的函数编码形式。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">sum1</span>(<span class="hljs-params">a, b, c</span>)&#123;<br>  <span class="hljs-keyword">return</span> a + b + c;<br>&#125;<br><span class="hljs-title function_">sum1</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)<br><br><span class="hljs-comment">// 柯里化后</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">sum</span>(<span class="hljs-params">a</span>)&#123;<br>  <span class="hljs-keyword">return</span><span class="hljs-function">(<span class="hljs-params">b</span>)=&gt;</span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">c</span>)=&gt;</span>&#123;<br>      <span class="hljs-keyword">return</span> a+b+c<br>    &#125;<br>  &#125;<br>&#125;<br><span class="hljs-title function_">sum</span>(<span class="hljs-number">1</span>)(<span class="hljs-number">2</span>)(<span class="hljs-number">3</span>)<br></code></pre></td></tr></table></figure>

<h3 id="7-3-利用高阶函数与函数柯里化简写6-4的代码"><a href="#7-3-利用高阶函数与函数柯里化简写6-4的代码" class="headerlink" title="7.3 利用高阶函数与函数柯里化简写6.4的代码"></a>7.3 利用高阶函数与函数柯里化简写6.4的代码</h3><p>必须传一个函数作为onChange事件的回调</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//创建组件</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Login</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span>&#123;<br>  <span class="hljs-comment">//初始化状态</span><br>  state = &#123;<br>    <span class="hljs-attr">username</span>:<span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-comment">//用户名</span><br>    <span class="hljs-attr">password</span>:<span class="hljs-string">&#x27;&#x27;</span> <span class="hljs-comment">//密码</span><br>  &#125;<br><br>  <span class="hljs-comment">//保存表单数据到状态中 （高阶函数+函数柯里化）</span><br>  saveFormData = <span class="hljs-function">(<span class="hljs-params">dataType</span>)=&gt;</span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">event</span>)=&gt;</span>&#123;<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123;[dataType]:event.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>&#125;)<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-comment">//表单提交的回调</span><br>  handleSubmit = <span class="hljs-function">(<span class="hljs-params">event</span>)=&gt;</span>&#123;<br>    event.<span class="hljs-title function_">preventDefault</span>() <span class="hljs-comment">//阻止表单提交</span><br>    <span class="hljs-keyword">const</span> &#123;username,password&#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span><br>    <span class="hljs-title function_">alert</span>(<span class="hljs-string">`你输入的用户名是：<span class="hljs-subst">$&#123;username&#125;</span>,你输入的密码是：<span class="hljs-subst">$&#123;password&#125;</span>`</span>)<br>  &#125;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-keyword">return</span>(<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">&#123;this.handleSubmit&#125;</span>&gt;</span></span><br><span class="language-xml">        用户名：<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;this.saveFormData(</span>&#x27;<span class="hljs-attr">username</span>&#x27;)&#125; <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span>/&gt;</span></span><br><span class="language-xml">        密码：<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;this.saveFormData(</span>&#x27;<span class="hljs-attr">password</span>&#x27;)&#125; <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span>/&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>登录<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br><span class="hljs-comment">//渲染组件</span><br><span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">render</span>(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Login</span>/&gt;</span></span>,<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;test&#x27;</span>))<br></code></pre></td></tr></table></figure>

<h3 id="7-4-不用柯里化实现7-3"><a href="#7-4-不用柯里化实现7-3" class="headerlink" title="7.4 不用柯里化实现7.3"></a>7.4 不用柯里化实现7.3</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//保存表单数据到状态中</span><br>saveFormData = <span class="hljs-function">(<span class="hljs-params">dataType,event</span>)=&gt;</span>&#123;<br>  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123;[dataType]:event.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>&#125;)<br>&#125;<br><br><span class="hljs-title function_">render</span>(<span class="hljs-params"></span>)&#123;<br>  <span class="hljs-keyword">return</span>(<br>	<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">&#123;this.handleSubmit&#125;</span>&gt;</span></span><br><span class="language-xml">	  用户名：<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;</span> <span class="hljs-attr">event</span> =&gt;</span> this.saveFormData(&#x27;username&#x27;,event) &#125; type=&quot;text&quot; name=&quot;username&quot;/&gt;</span><br><span class="language-xml">	  密码：<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;</span> <span class="hljs-attr">event</span> =&gt;</span> this.saveFormData(&#x27;password&#x27;,event) &#125; type=&quot;password&quot; name=&quot;password&quot;/&gt;</span><br><span class="language-xml">	  <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>登录<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">	<span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span><br>  )<br>&#125;<br></code></pre></td></tr></table></figure>
<h1 id="组件的生命周期-虚拟DOM-DOM-Diffing算法"><a href="#组件的生命周期-虚拟DOM-DOM-Diffing算法" class="headerlink" title="组件的生命周期 - 虚拟DOM - DOM Diffing算法"></a>组件的生命周期 - 虚拟DOM - DOM Diffing算法</h1><h2 id="1-组件的生命周期"><a href="#1-组件的生命周期" class="headerlink" title="1. 组件的生命周期"></a>1. 组件的生命周期</h2><h3 id="1-1-理解"><a href="#1-1-理解" class="headerlink" title="1.1 理解"></a>1.1 理解</h3><p>组件从创建到死亡它会经历一些特定的阶段。</p>
<p>React组件中包含一系列勾子函数(生命周期回调函数), 会在特定的时刻调用。</p>
<p>我们在定义组件时，会在特定的生命周期回调函数中，做特定的工作。</p>
<h3 id="1-2-引入案例"><a href="#1-2-引入案例" class="headerlink" title="1.2 引入案例"></a>1.2 引入案例</h3><p>需求:定义组件实现以下功能：</p>
<p>让指定的文本做显示 &#x2F; 隐藏的渐变动画</p>
<p>从完全可见，到彻底消失，耗时2S</p>
<p>点击“不活了”按钮从界面中卸载组件</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//创建组件</span><br><span class="hljs-comment">//生命周期回调函数 &lt;=&gt; 生命周期钩子函数 &lt;=&gt; 生命周期函数 &lt;=&gt; 生命周期钩子</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Life</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span>&#123;<br><br>  state = &#123;<span class="hljs-attr">opacity</span>:<span class="hljs-number">1</span>&#125;<br><br>  death = <span class="hljs-function">()=&gt;</span>&#123;<br>    <span class="hljs-comment">// 清除定时器</span><br>    <span class="hljs-comment">// clearInterval(this.timer)</span><br>    <span class="hljs-comment">// 卸载组件</span><br>    <span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">unmountComponentAtNode</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;test&#x27;</span>))<br>  &#125;<br><br>  <span class="hljs-comment">// 组件挂载完毕</span><br>  <span class="hljs-title function_">componentDidMount</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;componentDidMount&#x27;</span>);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">timer</span> = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>      <span class="hljs-comment">//获取原状态</span><br>      <span class="hljs-keyword">let</span> &#123;opacity&#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span><br>      <span class="hljs-comment">//减小0.1</span><br>      opacity -= <span class="hljs-number">0.1</span><br>      <span class="hljs-keyword">if</span>(opacity &lt;= <span class="hljs-number">0</span>) opacity = <span class="hljs-number">1</span><br>      <span class="hljs-comment">//设置新的透明度</span><br>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123;opacity&#125;)<br>    &#125;, <span class="hljs-number">200</span>);<br>  &#125;<br><br>  <span class="hljs-comment">// 组件将要卸载</span><br>  <span class="hljs-title function_">componentWillUnmount</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-comment">// 清除定时器</span><br>    <span class="hljs-built_in">clearInterval</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">timer</span>)<br>  &#125;<br><br>  <span class="hljs-comment">// 初始化渲染、状态更新之后 调用1+n次</span><br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;render&#x27;</span>);<br>    <span class="hljs-keyword">return</span>(<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;&#123;opacity:this.state.opacity&#125;&#125;</span>&gt;</span>React学不会怎么办？<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;this.death&#125;</span>&gt;</span>不活了<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br><span class="hljs-comment">//渲染组件</span><br><span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">render</span>(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Life</span>/&gt;</span></span>,<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;test&#x27;</span>))<br></code></pre></td></tr></table></figure>

<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fc4090cc0a5f44248e534fec82ab82d2~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image" srcset="/img/loading.gif" lazyload alt="image"></p>
<p><a target="_blank" rel="noopener" href="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fc4090cc0a5f44248e534fec82ab82d2~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image">https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fc4090cc0a5f44248e534fec82ab82d2~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image</a></p>
<h3 id="1-3-生命周期的三个阶段（旧）"><a href="#1-3-生命周期的三个阶段（旧）" class="headerlink" title="1.3 生命周期的三个阶段（旧）"></a>1.3 生命周期的三个阶段（旧）</h3><p><img src="https://user-images.githubusercontent.com/117837871/218704757-f4bd7825-9d5d-4eb6-89fe-2c33532ac4aa.png" srcset="/img/loading.gif" lazyload alt="image"></p>
<p>v16.8.4</p>
<h4 id="1-3-1-初始化阶段"><a href="#1-3-1-初始化阶段" class="headerlink" title="1.3.1 初始化阶段"></a>1.3.1 初始化阶段</h4><p>由**ReactDOM.render()**触发—初次渲染</p>
<p>1.**constructor()**—— 类组件中的构造函数</p>
<p>2.<strong>componentWillMount()</strong> —— 组件将要挂载 【即将废弃】</p>
<p>3.<strong>render()</strong>  —— 挂载组件</p>
<p>4.<strong>componentDidMount()</strong> —— 组件挂载完成 比较常用：</p>
<p>一般在这个钩子中做一些初始化的事，例如：开启定时器、发送网络请求、订阅消息</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Count</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span>&#123;<br><br>  <span class="hljs-comment">// 构造器</span><br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">props</span>)&#123;<br>    <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;constructor&#x27;</span>)<br>	<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Count---constructor&#x27;</span>);<br>	<span class="hljs-variable language_">super</span>(props)<br>	<span class="hljs-comment">// 初始化状态</span><br>	<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = &#123;<span class="hljs-attr">count</span>:<span class="hljs-number">0</span>&#125;<br>  &#125;<br>  <span class="hljs-comment">// state = &#123;count:0&#125;</span><br>  add = <span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> &#123;count&#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span><br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123;<span class="hljs-attr">count</span>: count+<span class="hljs-number">1</span>&#125;)<br>  &#125;<br>  <br>  <span class="hljs-comment">//组件将要挂载的钩子【即将废弃】</span><br>  <span class="hljs-title function_">componentWillMount</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;componentWillMount&#x27;</span>)<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Count---componentWillMount&#x27;</span>);<br>  &#125;<br><br>  <span class="hljs-comment">// 挂载组件</span><br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;render&#x27;</span>)<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Count---render&#x27;</span>);<br>    <span class="hljs-keyword">const</span> &#123;count&#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span><br>    <span class="hljs-keyword">return</span>(<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>当前计数值：&#123;count&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;this.add&#125;</span>&gt;</span>点我+1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>  &#125;<br><br>  <span class="hljs-comment">//组件挂载完毕的钩子</span><br>  <span class="hljs-title function_">componentDidMount</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;componentDidMount&#x27;</span>)<br>	<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Count---componentDidMount&#x27;</span>);<br>  &#125;<br>&#125;<br><span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">render</span>(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Count</span>/&gt;</span></span>, <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;test&#x27;</span>))<br></code></pre></td></tr></table></figure>

<p><img src="https://user-images.githubusercontent.com/117837871/218704847-ae672973-44d9-44c1-b65c-45a8751596e1.png" srcset="/img/loading.gif" lazyload alt="image"><br><a target="_blank" rel="noopener" href="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7505801778224e368ee9f40edf2d2642~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image">https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7505801778224e368ee9f40edf2d2642~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image</a></p>
<h4 id="1-3-2-更新阶段"><a href="#1-3-2-更新阶段" class="headerlink" title="1.3.2 更新阶段"></a>1.3.2 更新阶段</h4><p>【第一种情况】父组件重新<strong>render</strong>触发</p>
<p><strong>componentWillReceiveProps()</strong> —— 接收属性参数（非首次）【即将废弃】</p>
<p>然后调用下面的钩子函数*</p>
<p>【第二种情况】由组件内部<strong>this.setSate()</strong></p>
<p><strong>shouldComponentUpdate()</strong> —— 组件是否应该被更新（默认返回true）</p>
<p>然后调用下面的钩子函数</p>
<p>【第三种情况】强制更新 <strong>forceUpdate()</strong></p>
<p><strong>componentWillUpdate()</strong> ——组件将要更新 【即将废弃】</p>
<p><strong>render()</strong> —— 组件更新</p>
<p><strong>componentDidUpdate()</strong> —— 组件完成更新</p>
<h4 id="1-3-3-卸载组件"><a href="#1-3-3-卸载组件" class="headerlink" title="1.3.3 卸载组件"></a>1.3.3 卸载组件</h4><p>由**ReactDOM.unmountComponentAtNode()**触发</p>
<p><strong>componentWillUnmount()</strong> —— 组件即将卸载</p>
<h3 id="1-4-生命周期的三个阶段（新）"><a href="#1-4-生命周期的三个阶段（新）" class="headerlink" title="1.4 生命周期的三个阶段（新）"></a>1.4 生命周期的三个阶段（新）</h3><p>![image](<a target="_blank" rel="noopener" href="https://user-images.githubusercontent.com/11783">https://user-images.githubusercontent.com/11783</a>  7871&#x2F;218704912-83a52735-9acc-42e0-9cc6-83e6d752122f.png)</p>
<p>v17.0.1</p>
<h5 id="1-初始化阶段"><a href="#1-初始化阶段" class="headerlink" title="1. 初始化阶段"></a>1. 初始化阶段</h5><p>由**ReactDOM.render()**触发 —— 初次渲染</p>
<ul>
<li><p><strong>constructor()</strong> —— 类组件中的构造函数</p>
</li>
<li><p><strong>static getDerivedStateFromProps(props, state)</strong> 从props得到一个派生的状态【新增】</p>
</li>
<li><p><strong>render()</strong> —— 挂载组件</p>
</li>
<li><p><strong>componentDidMount()</strong> —— 组件挂载完成 比较&#x3D;&#x3D;常用&#x3D;&#x3D;</p>
</li>
</ul>
<h5 id="2-更新阶段"><a href="#2-更新阶段" class="headerlink" title="2. 更新阶段"></a>2. 更新阶段</h5><p>由组件内部<strong>this.setSate()<strong>或父组件</strong>重新render</strong>触发或强制更新<strong>forceUpdate()</strong></p>
<ul>
<li><p><strong>getDerivedStateFromProps()</strong> —— 从props得到一个派生的状态  【新增】</p>
</li>
<li><p><strong>shouldComponentUpdate()</strong> —— 组件是否应该被更新（默认返回true）</p>
</li>
<li><p><strong>render()</strong> —— 挂载组件</p>
</li>
<li><p><strong>getSnapshotBeforeUpdate()</strong> —— 在更新之前获取快照【新增】</p>
</li>
<li><p><strong>componentDidUpdate(prevProps, prevState, snapshotValue)</strong> —— 组件完成更新</p>
</li>
</ul>
<h5 id="3-卸载组件"><a href="#3-卸载组件" class="headerlink" title="3. 卸载组件"></a>3. 卸载组件</h5><ul>
<li><p>由ReactDOM.unmountComponentAtNode()触发</p>
</li>
<li><p><strong>componentWillUnmount()</strong> —— 组件即将卸载</p>
</li>
</ul>
<h3 id="1-5-重要的勾子"><a href="#1-5-重要的勾子" class="headerlink" title="1.5 重要的勾子"></a>1.5 重要的勾子</h3><p><strong>render</strong>：初始化渲染或更新渲染调用</p>
<p><strong>componentDidMount</strong>：开启监听, 发送ajax请求</p>
<p><strong>componentWillUnmount</strong>：做一些收尾工作, 如: 清理定时器</p>
<h3 id="1-6-即将废弃的勾子"><a href="#1-6-即将废弃的勾子" class="headerlink" title="1.6 即将废弃的勾子"></a>1.6 即将废弃的勾子</h3><p>componentWillMount</p>
<p>componentWillReceiveProps</p>
<p>componentWillUpdate</p>
<p>现在使用会出现警告，下一个大版本需要加上UNSAFE_前缀才能使用，以后可能会被彻底废弃，不建议使用。</p>
<h2 id="2-虚拟DOM与DOM-Diffing算法"><a href="#2-虚拟DOM与DOM-Diffing算法" class="headerlink" title="2. 虚拟DOM与DOM Diffing算法"></a>2. 虚拟DOM与DOM Diffing算法</h2><h3 id="2-1-基本原理图"><a href="#2-1-基本原理图" class="headerlink" title="2.1 基本原理图"></a>2.1 基本原理图</h3><p><img src="https://user-images.githubusercontent.com/117837871/218704968-244b5f61-9cad-4458-8fcf-fa62ba1e00ab.png" srcset="/img/loading.gif" lazyload alt="image"></p>
<p>详细的原理可以看之前在学Vue源码时的关于diff的笔记【Vue源码】图解 diff算法 与 虚拟DOM-snabbdom-最小量更新原理解析-手写源码-</p>
<h3 id="2-2-关于key的经典面试题"><a href="#2-2-关于key的经典面试题" class="headerlink" title="2.2 关于key的经典面试题"></a>2.2 关于key的经典面试题</h3><p>react&#x2F;vue中的key有什么作用？（key的内部原理是什么？）</p>
<p>为什么遍历列表时，key最好不要用index?</p>
<h4 id="2-2-1-虚拟DOM中key的作用"><a href="#2-2-1-虚拟DOM中key的作用" class="headerlink" title="2.2.1 虚拟DOM中key的作用"></a>2.2.1 虚拟DOM中key的作用</h4><p>简单的说: key是虚拟DOM对象的标识, 在更新显示时key起着极其重要的作用。</p>
<p>详细的说: 当状态中的数据发生变化时，react会根据【新数据】生成【新的虚拟DOM】, 随后React进行【新虚拟DOM】与【旧虚拟DOM】的diff比较，比较规则如下：</p>
<p>旧虚拟DOM中找到了与新虚拟DOM相同的key：</p>
<p>若虚拟DOM中内容没变, 直接使用之前的真实DOM</p>
<p>若虚拟DOM中内容变了, 则生成新的真实DOM，随后替换掉页面中之前的真实DOM</p>
<p>旧虚拟DOM中未找到与新虚拟DOM相同的key</p>
<p>根据数据创建新的真实DOM，随后渲染到到页面</p>
<h4 id="2-2-2-用index作为key可能会引发的问题"><a href="#2-2-2-用index作为key可能会引发的问题" class="headerlink" title="2.2.2 用index作为key可能会引发的问题"></a>2.2.2 用index作为key可能会引发的问题</h4><p>若对数据进行：逆序添加、逆序删除等破坏顺序操作: 会产生没有必要的真实DOM更新 &#x3D;&#x3D;&gt; 界面效果没问题, 但效率低</p>
<p>如果结构中还包含输入类的DOM：会产生错误DOM更新 &#x3D;&#x3D;&gt; 界面有问题</p>
<p>注意！如果不存在对数据的逆序添加、逆序删除等破坏顺序操作，仅用于渲染列表用于展示，使用index作为key是没有问题的</p>
<p>2.2.3 开发中如何选择key?</p>
<p>最好使用每条数据的唯一标识作为key, 比如id、手机号、身份证号、学号等唯一值</p>
<p>如果确定只是简单的展示数据，用index也是可以的</p>
<h1 id="使用create-react-app创建react应用"><a href="#使用create-react-app创建react应用" class="headerlink" title="使用create-react-app创建react应用"></a>使用create-react-app创建react应用</h1><h2 id="1-1-react脚手架"><a href="#1-1-react脚手架" class="headerlink" title="1.1. react脚手架"></a>1.1. react脚手架</h2><p>1.xxx脚手架: 用来帮助程序员快速创建一个基于xxx库的模板项目</p>
<ul>
<li><p>包含了所有需要的配置（语法检查、jsx编译、devServer…）</p>
</li>
<li><p>下载好了所有相关的依赖</p>
</li>
<li><p>可以直接运行一个简单效果</p>
</li>
</ul>
<p>2.react提供了一个用于创建react项目的脚手架库: create-react-app</p>
<p>3.项目的整体技术架构为:  react + webpack + es6 + eslint</p>
<p>4.使用脚手架开发的项目的特点: 模块化, 组件化, 工程化</p>
<h2 id="1-2-创建项目并启动"><a href="#1-2-创建项目并启动" class="headerlink" title="1.2. 创建项目并启动"></a>1.2. 创建项目并启动</h2><p>全局安装：<strong>npm install -g create-react-app</strong></p>
<p>切换到想创项目的目录，使用命令：<strong>create-react-app hello-react</strong></p>
<p>进入项目文件夹：<strong>cd hello-react</strong></p>
<p>启动项目：<strong>npm start</strong></p>
<p><img src="https://user-images.githubusercontent.com/117837871/220043507-be6a541b-0555-45ef-9f6b-3b4d3d7f2933.png" srcset="/img/loading.gif" lazyload alt="image"></p>
<p><img src="https://user-images.githubusercontent.com/117837871/220043555-34074e8d-6f6e-4465-b3f4-3b66839e455d.png" srcset="/img/loading.gif" lazyload alt="image"></p>
<h2 id="1-3-react脚手架项目结构"><a href="#1-3-react脚手架项目结构" class="headerlink" title="1.3. react脚手架项目结构"></a>1.3. react脚手架项目结构</h2><p>public —- 静态资源文件夹</p>
<pre><code class="hljs">favicon.icon ------ 网站页签图标

index.html -------- 主页面

logo192.png ------- logo图

logo512.png ------- logo图

manifest.json ----- 应用加壳的配置文件

robots.txt -------- 爬虫协议文件
</code></pre>
<p>src —- 源码文件夹</p>
<pre><code class="hljs">App.css -------- App组件的样式

App.js --------- App组件

App.test.js ---- 用于给App做测试
</code></pre>
<p>  index.css —— 样式</p>
<p>  index.js ——- 入口文件</p>
<p>  logo.svg ——- logo图</p>
<p>  reportWebVitals.js — 页面性能分析文件(需要web-vitals库的支持)</p>
<p>  setupTests.js —- 组件单元测试的文件(需要jest-dom库的支持)</p>
<p><strong>&gt;&gt;index.html</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;!<span class="hljs-variable constant_">DOCTYPE</span> html&gt;<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span> /&gt;</span></span><br><span class="language-xml">  <span class="hljs-comment">&lt;!-- %PUBLIC_URL%代表public文件夹的路径 --&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;icon&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;%PUBLIC_URL%/favicon.ico&quot;</span> /&gt;</span></span><br><span class="language-xml">  <span class="hljs-comment">&lt;!-- 开启理想视口，用于做移动端网页的适配 --&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1&quot;</span> /&gt;</span></span><br><span class="language-xml">  <span class="hljs-comment">&lt;!-- 用于配置浏览器页签+地址栏的颜色(仅支持安卓手机浏览器) --&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;theme-color&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;red&quot;</span> /&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;description&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;Web site created using create-react-app&quot;</span> /&gt;</span></span><br><span class="language-xml">  <span class="hljs-comment">&lt;!-- 用于指定网页添加到手机主屏幕后的图标 --&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;apple-touch-icon&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;%PUBLIC_URL%/logo192.png&quot;</span> /&gt;</span></span><br><span class="language-xml">  </span><br><span class="language-xml">  <span class="hljs-comment">&lt;!--</span></span><br><span class="hljs-comment"><span class="language-xml">    manifest.json provides metadata used when your web app is installed on a</span></span><br><span class="hljs-comment"><span class="language-xml">    user&#x27;s mobile device or desktop. See https://developers.google.com/web/fundamentals/web-app-manifest/</span></span><br><span class="hljs-comment"><span class="language-xml">  --&gt;</span></span><br><span class="language-xml">  <span class="hljs-comment">&lt;!-- 应用加壳时的配置文件 --&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;manifest&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;%PUBLIC_URL%/manifest.json&quot;</span> /&gt;</span></span><br><span class="language-xml">  <span class="hljs-comment">&lt;!--</span></span><br><span class="hljs-comment"><span class="language-xml">    Notice the use of %PUBLIC_URL% in the tags above.</span></span><br><span class="hljs-comment"><span class="language-xml">    It will be replaced with the URL of the `public` folder during the build.</span></span><br><span class="hljs-comment"><span class="language-xml">    Only files inside the `public` folder can be referenced from the HTML.</span></span><br><span class="hljs-comment"><span class="language-xml"></span></span><br><span class="hljs-comment"><span class="language-xml">    Unlike &quot;/favicon.ico&quot; or &quot;favicon.ico&quot;, &quot;%PUBLIC_URL%/favicon.ico&quot; will</span></span><br><span class="hljs-comment"><span class="language-xml">    work correctly both with client-side routing and a non-root public URL.</span></span><br><span class="hljs-comment"><span class="language-xml">    Learn how to configure a non-root public URL by running `npm run build`.</span></span><br><span class="hljs-comment"><span class="language-xml">  --&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>React App<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-comment">&lt;!-- 若浏览器不支持js则展示标签中的内容 --&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">noscript</span>&gt;</span>You need to enable JavaScript to run this app.<span class="hljs-tag">&lt;/<span class="hljs-name">noscript</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;root&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-comment">&lt;!--</span></span><br><span class="hljs-comment"><span class="language-xml">    This HTML file is a template.</span></span><br><span class="hljs-comment"><span class="language-xml">    If you open it directly in the browser, you will see an empty page.</span></span><br><span class="hljs-comment"><span class="language-xml"></span></span><br><span class="hljs-comment"><span class="language-xml">    You can add webfonts, meta tags, or analytics to this file.</span></span><br><span class="hljs-comment"><span class="language-xml">    The build step will place the bundled scripts into the &lt;body&gt; tag.</span></span><br><span class="hljs-comment"><span class="language-xml"></span></span><br><span class="hljs-comment"><span class="language-xml">    To begin the development, run `npm start` or `yarn start`.</span></span><br><span class="hljs-comment"><span class="language-xml">    To create a production bundle, use `npm run build` or `yarn build`.</span></span><br><span class="hljs-comment"><span class="language-xml">  --&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span><br></code></pre></td></tr></table></figure>

<p><strong>&gt;&gt;index.js</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">ReactDOM</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-dom&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./index.css&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./App&#x27;</span>;<br><span class="hljs-keyword">import</span> reportWebVitals <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./reportWebVitals&#x27;</span>;<br><br><span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">render</span>(<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">React.StrictMode</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">React.StrictMode</span>&gt;</span></span>,<br>  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;root&#x27;</span>)<br>);<br><br><span class="hljs-comment">// If you want to start measuring performance in your app, pass a function</span><br><span class="hljs-comment">// to log results (for example: reportWebVitals(console.log))</span><br><span class="hljs-comment">// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals</span><br><span class="hljs-title function_">reportWebVitals</span>();<br></code></pre></td></tr></table></figure>

<p><strong>&gt;&gt;App.js</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> logo <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./logo.svg&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./App.css&#x27;</span>;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;App&quot;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">header</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;App-header&quot;</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&#123;logo&#125;</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;App-logo&quot;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;logo&quot;</span> /&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">          Edit <span class="hljs-tag">&lt;<span class="hljs-name">code</span>&gt;</span>src/App.js<span class="hljs-tag">&lt;/<span class="hljs-name">code</span>&gt;</span> and save to reload.</span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">a</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;App-link&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;https://reactjs.org&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">target</span>=<span class="hljs-string">&quot;_blank&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;noopener noreferrer&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        &gt;</span></span><br><span class="language-xml">          Learn React</span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span>;<br></code></pre></td></tr></table></figure>

<h2 id="1-4-功能界面的组件化编码流程（通用）"><a href="#1-4-功能界面的组件化编码流程（通用）" class="headerlink" title="1.4. 功能界面的组件化编码流程（通用）"></a>1.4. 功能界面的组件化编码流程（通用）</h2><p>1.拆分组件: 拆分界面,抽取组件</p>
<p>2.实现静态组件: 使用组件实现静态页面效果</p>
<p>3.实现动态组件</p>
<ul>
<li><p>动态显示初始化数据</p>
<ul>
<li><p>数据类型</p>
</li>
<li><p>数据名称</p>
</li>
<li><p>保存在哪个组件</p>
</li>
</ul>
</li>
<li><p>交互(从绑定事件监听开始)</p>
</li>
</ul>
<h1 id="2-脚手架版-Hello-React"><a href="#2-脚手架版-Hello-React" class="headerlink" title="2. 脚手架版 Hello React"></a>2. 脚手架版 Hello React</h1><h2 id="2-1-注意事项"><a href="#2-1-注意事项" class="headerlink" title="2.1 注意事项"></a>2.1 注意事项</h2><p>  1.为了区分组件和普通js文件，可以把定义组件的js文件后缀改成jsx</p>
<p>  2.一个组件一个文件夹</p>
<p>  3.引入js文件或者jsx文件时，可以不写后缀名</p>
<p>  4.组件文件夹中的文件可以都命名为index，例如 index.jsx&#x2F;index.css，引入的时候可以直接引到目录名就行了</p>
<h2 id="2-2-文件目录"><a href="#2-2-文件目录" class="headerlink" title="2.2 文件目录"></a>2.2 文件目录</h2><p><img src="https://user-images.githubusercontent.com/117837871/220043678-0443345f-4ad2-4437-a593-ef3bd9cba086.png" srcset="/img/loading.gif" lazyload alt="image"></p>
<h2 id="2-3-代码"><a href="#2-3-代码" class="headerlink" title="2.3 代码"></a>2.3 代码</h2><p><strong>&gt;&gt;index.html</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;!<span class="hljs-variable constant_">DOCTYPE</span> html&gt;<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span> /&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;icon&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;%PUBLIC_URL%/favicon.ico&quot;</span> /&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>React App<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;root&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span><br></code></pre></td></tr></table></figure>

<p><strong>&gt;&gt;index.js</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">ReactDOM</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react-dom&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./App&quot;</span>;<br><br><span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">render</span>(<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">React.StrictMode</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">React.StrictMode</span>&gt;</span></span>,<br>  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;root&quot;</span>)<br>);<br></code></pre></td></tr></table></figure>

<p><strong>&gt;&gt;App.js</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; <span class="hljs-title class_">Component</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Hello</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./components/Hello/Hello&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Welcome</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./components/Welcome/Welcome&quot;</span>;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Hello</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Hello</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Welcome</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Welcome</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>&gt;&gt;Hello.jsx</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; <span class="hljs-title class_">Component</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;./Hello.css&quot;</span>;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Hello</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span>Hello React<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>&gt;&gt;Hello.css</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript">.<span class="hljs-property">title</span> &#123;<br>  background-<span class="hljs-attr">color</span>: pink;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>&gt;&gt;Welcome.jsx</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; <span class="hljs-title class_">Component</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;./Welcome.css&quot;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Welcome</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;demo&quot;</span>&gt;</span>Welcome<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span>;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>&gt;&gt;Welcome.css</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript">.<span class="hljs-property">demo</span> &#123;<br>  background-<span class="hljs-attr">color</span>: skyblue;<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="2-4-页面"><a href="#2-4-页面" class="headerlink" title="2.4 页面"></a>2.4 页面</h2><p><img src="https://user-images.githubusercontent.com/117837871/220043748-e4348946-70a0-4c1b-b839-a110a2ef6382.png" srcset="/img/loading.gif" lazyload alt="image"></p>
<h1 id="3-VSCode生成代码模板"><a href="#3-VSCode生成代码模板" class="headerlink" title="3. VSCode生成代码模板"></a>3. VSCode生成代码模板</h1><p><img src="https://user-images.githubusercontent.com/117837871/220043789-c8f7da4b-7405-4279-b1fd-f644c920d5dc.png" srcset="/img/loading.gif" lazyload alt="image"></p>
<p>rcc+回车 （react class component）</p>
<p><img src="https://user-images.githubusercontent.com/117837871/220043844-498fe04c-4675-4891-81b3-fcee7c9c1a97.png" srcset="/img/loading.gif" lazyload alt="image"></p>
<p>rfc（react function component）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; <span class="hljs-title class_">Component</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        </span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><img src="https://user-images.githubusercontent.com/117837871/220043913-c6f6f826-a2e6-46d8-b6d6-befc49fc5948.png" srcset="/img/loading.gif" lazyload alt="image"></p>
<h1 id="4-样式的模块化"><a href="#4-样式的模块化" class="headerlink" title="4. 样式的模块化"></a>4. 样式的模块化</h1><p>文件名保存为 <strong>index.module.css</strong></p>
<p>引入文件 <strong>import hello from ‘.&#x2F;index.module.css’</strong></p>
<p>使用样式 <strong><h2 className={hello.title}> Hello </h2></strong></p>
<h1 id="TodoList"><a href="#TodoList" class="headerlink" title="TodoList"></a>TodoList</h1><h2 id="1-目标功能界面"><a href="#1-目标功能界面" class="headerlink" title="1. 目标功能界面"></a>1. 目标功能界面</h2><p><img src="https://user-images.githubusercontent.com/117837871/220586710-8cda4354-1d15-44b3-8d2e-1196c43a9679.png" srcset="/img/loading.gif" lazyload alt="image"></p>
<h2 id="2-界面模块拆分"><a href="#2-界面模块拆分" class="headerlink" title="2. 界面模块拆分"></a>2. 界面模块拆分</h2><p><img src="https://user-images.githubusercontent.com/117837871/220586632-ce9102cb-724b-472c-b580-74e5c67dd91b.png" srcset="/img/loading.gif" lazyload alt="image"></p>
<p><img src="https://user-images.githubusercontent.com/117837871/220586897-9993ceae-c17b-4db0-b1fb-f51317040f25.png" srcset="/img/loading.gif" lazyload alt="image"></p>
<h2 id="3-主页"><a href="#3-主页" class="headerlink" title="3. 主页"></a>3. 主页</h2><p><strong>&gt;&gt;index.html</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span> /&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;icon&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;%PUBLIC_URL%/favicon.ico&quot;</span> /&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>React App<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;root&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h2 id="4-静态页面搭建"><a href="#4-静态页面搭建" class="headerlink" title="4. 静态页面搭建"></a>4. 静态页面搭建</h2><p><strong>&gt;&gt;index.js</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">ReactDDOM</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react-dom&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./App&quot;</span>;<br><br><span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">render</span>(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span></span>, <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;root&quot;</span>));<br></code></pre></td></tr></table></figure>


<p><strong>&gt;&gt;App.jsx</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; <span class="hljs-title class_">Component</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Header</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./components/Header&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">List</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./components/List&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Footer</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./components/Footer&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./App.css&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;todo-container&quot;</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;todo-warp&quot;</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">Header</span> /&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">List</span> /&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">Footer</span> /&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>&gt;&gt;App.css</strong></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-comment">/*base*/</span><br><span class="hljs-selector-tag">body</span> &#123;<br>  <span class="hljs-attribute">background</span>: <span class="hljs-number">#fff</span>;<br>&#125;<br><br><span class="hljs-selector-class">.btn</span> &#123;<br>  <span class="hljs-attribute">display</span>: inline-block;<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">4px</span> <span class="hljs-number">12px</span>;<br>  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">0</span>;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;<br>  <span class="hljs-attribute">line-height</span>: <span class="hljs-number">20px</span>;<br>  <span class="hljs-attribute">text-align</span>: center;<br>  <span class="hljs-attribute">vertical-align</span>: middle;<br>  <span class="hljs-attribute">cursor</span>: pointer;<br>  <span class="hljs-attribute">box-shadow</span>: inset <span class="hljs-number">0</span> <span class="hljs-number">1px</span> <span class="hljs-number">0</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0.2</span>), <span class="hljs-number">0</span> <span class="hljs-number">1px</span> <span class="hljs-number">2px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.05</span>);<br>  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;<br>&#125;<br><br><span class="hljs-selector-class">.btn-danger</span> &#123;<br>  <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>;<br>  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#da4f49</span>;<br>  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#bd362f</span>;<br>&#125;<br><br><span class="hljs-selector-class">.btn-danger</span><span class="hljs-selector-pseudo">:hover</span> &#123;<br>  <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>;<br>  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#bd362f</span>;<br>&#125;<br><br><span class="hljs-selector-class">.btn</span><span class="hljs-selector-pseudo">:focus</span> &#123;<br>  <span class="hljs-attribute">outline</span>: none;<br>&#125;<br><br><span class="hljs-comment">/*app*/</span><br><span class="hljs-selector-class">.todo-container</span> &#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">600px</span>;<br>  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto;<br>&#125;<br><span class="hljs-selector-class">.todo-container</span> <span class="hljs-selector-class">.todo-wrap</span> &#123;<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;<br>  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ddd</span>;<br>  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">5px</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>&gt;&gt;Header&#x2F;index.js</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; <span class="hljs-title class_">Component</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./index.css&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Header</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;todo-header&quot;</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;请输入你的任务名称，按回车键确认&quot;</span>/&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>


<p><strong>&gt;&gt;Header&#x2F;index.css</strong></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-comment">/*header*/</span><br><span class="hljs-selector-class">.todo-header</span> <span class="hljs-selector-tag">input</span> &#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">560px</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">28px</span>;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;<br>  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ccc</span>;<br>  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">4px</span> <span class="hljs-number">7px</span>;<br>&#125;<br><br><span class="hljs-selector-class">.todo-header</span> <span class="hljs-selector-tag">input</span><span class="hljs-selector-pseudo">:focus</span> &#123;<br>  <span class="hljs-attribute">outline</span>: none;<br>  <span class="hljs-attribute">border-color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">82</span>, <span class="hljs-number">168</span>, <span class="hljs-number">236</span>, <span class="hljs-number">0.8</span>);<br>  <span class="hljs-attribute">box-shadow</span>: inset <span class="hljs-number">0</span> <span class="hljs-number">1px</span> <span class="hljs-number">1px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.075</span>), <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">8px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">82</span>, <span class="hljs-number">168</span>, <span class="hljs-number">236</span>, <span class="hljs-number">0.6</span>);<br>&#125;<br></code></pre></td></tr></table></figure>


<p><strong>&gt;&gt;List&#x2F;index.jsx</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; <span class="hljs-title class_">Component</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Item</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../Item&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./index.css&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">List</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;todo-main&quot;</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Item</span> /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>


<p><strong>&gt;&gt;List&#x2F;index.css</strong></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-comment">/*main*/</span><br><span class="hljs-selector-class">.todo-main</span> &#123;<br>  <span class="hljs-attribute">margin-left</span>: <span class="hljs-number">0px</span>;<br>  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ddd</span>;<br>  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">2px</span>;<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">0px</span>;<br>&#125;<br><br><span class="hljs-selector-class">.todo-empty</span> &#123;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">40px</span>;<br>  <span class="hljs-attribute">line-height</span>: <span class="hljs-number">40px</span>;<br>  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ddd</span>;<br>  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">2px</span>;<br>  <span class="hljs-attribute">padding-left</span>: <span class="hljs-number">5px</span>;<br>  <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">10px</span>;<br>&#125;<br></code></pre></td></tr></table></figure>


<p><strong>&gt;&gt;Item&#x2F;index.jsx</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; <span class="hljs-title class_">Component</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./index.css&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Item</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span>/&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>xxxxx<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;btn btn-danger&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;&#123;display:</span>&#x27;<span class="hljs-attr">none</span>&#x27;&#125;&#125;&gt;</span>删除<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>


<p><strong>&gt;&gt;Item&#x2F;index.css</strong></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-comment">/*item*/</span><br><span class="hljs-selector-tag">li</span> &#123;<br>  <span class="hljs-attribute">list-style</span>: none;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">36px</span>;<br>  <span class="hljs-attribute">line-height</span>: <span class="hljs-number">36px</span>;<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-number">5px</span>;<br>  <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ddd</span>;<br>&#125;<br><br><span class="hljs-selector-tag">li</span> <span class="hljs-selector-tag">label</span> &#123;<br>  <span class="hljs-attribute">float</span>: left;<br>  <span class="hljs-attribute">cursor</span>: pointer;<br>&#125;<br><br><span class="hljs-selector-tag">li</span> <span class="hljs-selector-tag">label</span> <span class="hljs-selector-tag">li</span> <span class="hljs-selector-tag">input</span> &#123;<br>  <span class="hljs-attribute">vertical-align</span>: middle;<br>  <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">6px</span>;<br>  <span class="hljs-attribute">position</span>: relative;<br>  <span class="hljs-attribute">top</span>: -<span class="hljs-number">1px</span>;<br>&#125;<br><br><span class="hljs-selector-tag">li</span> <span class="hljs-selector-tag">button</span> &#123;<br>  <span class="hljs-attribute">float</span>: right;<br>  <span class="hljs-attribute">display</span>: none;<br>  <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">3px</span>;<br>&#125;<br><br><span class="hljs-selector-tag">li</span><span class="hljs-selector-pseudo">:before</span> &#123;<br>  <span class="hljs-attribute">content</span>: initial;<br>&#125;<br><br><span class="hljs-selector-tag">li</span><span class="hljs-selector-pseudo">:last-child</span> &#123;<br>  <span class="hljs-attribute">border-bottom</span>: none;<br>&#125;<br></code></pre></td></tr></table></figure>


<p><strong>&gt;&gt;Footer&#x2F;index.jsx</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; <span class="hljs-title class_">Component</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./index.css&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Footer</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;todo-footer&quot;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span>/&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>已完成0<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> / 全部2</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;btn btn-danger&quot;</span>&gt;</span>清除已完成任务<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>


<p><strong>&gt;&gt;Footer&#x2F;index.css</strong></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-comment">/*footer*/</span><br><span class="hljs-selector-class">.todo-footer</span> &#123;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">40px</span>;<br>  <span class="hljs-attribute">line-height</span>: <span class="hljs-number">40px</span>;<br>  <span class="hljs-attribute">padding-left</span>: <span class="hljs-number">6px</span>;<br>  <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">5px</span>;<br>&#125;<br><br><span class="hljs-selector-class">.todo-footer</span> <span class="hljs-selector-tag">label</span> &#123;<br>  <span class="hljs-attribute">display</span>: inline-block;<br>  <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">20px</span>;<br>  <span class="hljs-attribute">cursor</span>: pointer;<br>&#125;<br><br><span class="hljs-selector-class">.todo-footer</span> <span class="hljs-selector-tag">label</span> <span class="hljs-selector-tag">input</span> &#123;<br>  <span class="hljs-attribute">position</span>: relative;<br>  <span class="hljs-attribute">top</span>: -<span class="hljs-number">1px</span>;<br>  <span class="hljs-attribute">vertical-align</span>: middle;<br>  <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">5px</span>;<br>&#125;<br><br><span class="hljs-selector-class">.todo-footer</span> <span class="hljs-selector-tag">button</span> &#123;<br>  <span class="hljs-attribute">float</span>: right;<br>  <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">5px</span>;<br>&#125;<br></code></pre></td></tr></table></figure>


<h2 id="5-动态组件"><a href="#5-动态组件" class="headerlink" title="5. 动态组件"></a>5. 动态组件</h2><h3 id="5-1-动态初始化页面"><a href="#5-1-动态初始化页面" class="headerlink" title="5.1 动态初始化页面"></a>5.1 动态初始化页面</h3><p>状态驱动组件</p>
<p>考虑两个问题  要将状态放在哪？ 状态的存储形式是什么？</p>
<p>可以将状态放在需要使用状态的 父组件 App中，这样Header和List都可以通过props拿到状态数据</p>
<p>状态的存储形式采用对象数组</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 初始化状态</span><br>state = &#123;<br>  <span class="hljs-attr">todos</span>: [<br>    &#123; <span class="hljs-attr">id</span>: <span class="hljs-string">&#x27;001&#x27;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;吃饭&#x27;</span>, <span class="hljs-attr">done</span>: <span class="hljs-literal">true</span> &#125;,<br>    &#123; <span class="hljs-attr">id</span>: <span class="hljs-string">&#x27;002&#x27;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;睡觉&#x27;</span>, <span class="hljs-attr">done</span>: <span class="hljs-literal">true</span> &#125;,<br>    &#123; <span class="hljs-attr">id</span>: <span class="hljs-string">&#x27;003&#x27;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;敲代码&#x27;</span>, <span class="hljs-attr">done</span>: <span class="hljs-literal">false</span> &#125;,<br>  ]<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>&gt;&gt;App.jsx</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//在App.jsx组件中定义状态state，通过标签属性传递给子组件List的props中</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br>  <span class="hljs-comment">// 初始化状态</span><br>  state = &#123;<br>    <span class="hljs-attr">todos</span>: [<br>      &#123; <span class="hljs-attr">id</span>: <span class="hljs-string">&#x27;001&#x27;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;吃饭&#x27;</span>, <span class="hljs-attr">done</span>: <span class="hljs-literal">true</span> &#125;,<br>      &#123; <span class="hljs-attr">id</span>: <span class="hljs-string">&#x27;002&#x27;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;睡觉&#x27;</span>, <span class="hljs-attr">done</span>: <span class="hljs-literal">true</span> &#125;,<br>      &#123; <span class="hljs-attr">id</span>: <span class="hljs-string">&#x27;003&#x27;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;敲代码&#x27;</span>, <span class="hljs-attr">done</span>: <span class="hljs-literal">false</span> &#125;,<br>    ]<br>  &#125;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span>  &#123;todos&#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span><br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;todo-container&quot;</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;todo-warp&quot;</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">Header</span> /&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">List</span> <span class="hljs-attr">todos</span>=<span class="hljs-string">&#123;todos&#125;</span> /&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">Footer</span> /&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>&gt;&gt;List&#x2F;index.jsx</strong></p>
<p>子组件通过this.props得到父组件传递过来的状态</p>
<p>通过循环遍历todos得到一个个todo，将他们传递给Item子组件</p>
<p>通过标签属性的形式，父组件List传递状态到子组件Item中</p>
<p>指定key 再展开todo传递给子组件</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">List</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span> &#123;todos&#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span><br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;todo-main&quot;</span>&gt;</span></span><br><span class="language-xml">        &#123;</span><br><span class="language-xml">          todos.map((todo) =&gt; &#123;</span><br><span class="language-xml">            return <span class="hljs-tag">&lt;<span class="hljs-name">Item</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;todo.id&#125;</span> &#123;<span class="hljs-attr">...todo</span>&#125;/&gt;</span></span><br><span class="language-xml">          &#125;)</span><br><span class="language-xml">        &#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>&gt;&gt;Item&#x2F;index.jsx</strong></p>
<p>子组件通过this.props得到父组件传递过来的每个todo的状态</p>
<p>动态渲染props中获取的状态 name 和 done</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Item</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span> &#123; name, done &#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span><br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span> <span class="hljs-attr">defaultChecked</span>=<span class="hljs-string">&#123;done&#125;/</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#123;name&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;btn btn-danger&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;&#123;display:</span>&#x27;<span class="hljs-attr">none</span>&#x27;&#125;&#125;&gt;</span>删除<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>


<h3 id="5-2-动态添加todo"><a href="#5-2-动态添加todo" class="headerlink" title="5.2 动态添加todo"></a>5.2 动态添加todo</h3><p>子组件要向父组件 传递 得到的输入值</p>
<p>可以通过调用函数， 传递参数的形式 来传递状态</p>
<p>App.jsx</p>
<p>状态在父组件中，修改状态的操作就定义在父组件中</p>
<p>在父组件中定义一个addTodo函数，然后通过标签传递给子组件</p>
<p>addTodo函数接受一个参数，这个参数就是要接受的子组件的数据</p>
<p>通过这个参数，将子组件的数据传给父组件</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br>  <span class="hljs-comment">// 用于添加一个todo，接受的参数是todo对象</span><br>  addTodo = <span class="hljs-function">(<span class="hljs-params">todoObj</span>) =&gt;</span> &#123;<br>    <span class="hljs-comment">// 获取原todos</span><br>    <span class="hljs-keyword">const</span> &#123; todos &#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span><br>    <span class="hljs-comment">// 追加一个todo</span><br>    <span class="hljs-keyword">const</span> newTodos = [todoObj, ...todos]<br>    <span class="hljs-comment">// 更新状态</span><br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123; <span class="hljs-attr">todos</span>: newTodos &#125;)<br>  &#125;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span>  &#123;todos&#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span><br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;todo-container&quot;</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;todo-warp&quot;</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">Header</span> <span class="hljs-attr">addTodo</span>=<span class="hljs-string">&#123;this.addTodo&#125;</span> /&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">List</span> <span class="hljs-attr">todos</span>=<span class="hljs-string">&#123;todos&#125;</span> /&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">Footer</span> /&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>&gt;&gt;Header&#x2F;index.js</strong></p>
<p>生成唯一id的库</p>
<p>uuid</p>
<p>nanoid</p>
<p>npm install nanoid</p>
<p>父组件通过标签属性传递了一个函数给子组件，子组件可以通过this.props来调用函数</p>
<p>函数的参数，就是子组件要传递给父组件的数据</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Header</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br>  handleKeyUp = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> &#123;keyCode, target&#125; = event<br>    <span class="hljs-keyword">if</span> (keyCode !== <span class="hljs-number">13</span>) <span class="hljs-keyword">return</span><br>    <span class="hljs-keyword">if</span> (target.<span class="hljs-property">value</span>.<span class="hljs-title function_">trim</span>() === <span class="hljs-string">&#x27;&#x27;</span>) &#123;<br>      <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;输入不能为空&#x27;</span>)<br>      <span class="hljs-keyword">return</span><br>    &#125;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-title function_">addTodo</span>(&#123;<br>      <span class="hljs-attr">id</span>: <span class="hljs-title function_">nanoid</span>(),<br>      <span class="hljs-attr">name</span>: target.<span class="hljs-property">value</span>,<br>      <span class="hljs-attr">done</span>: <span class="hljs-literal">false</span><br>    &#125;)<br>    target.<span class="hljs-property">value</span> = <span class="hljs-string">&#x27;&#x27;</span><br>  &#125;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;todo-header&quot;</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">onKeyUp</span>=<span class="hljs-string">&#123;this.handleKeyUp&#125;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;请输入你的任务名称，按回车键确认&quot;</span>/&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>


<h2 id="5-3-鼠标悬浮高亮"><a href="#5-3-鼠标悬浮高亮" class="headerlink" title="5.3 鼠标悬浮高亮"></a>5.3 鼠标悬浮高亮</h2><p>定义一个mouse状态，用来 标识鼠标移入移出</p>
<p>通过mouse状态的改变，来改变style样式（背景颜色+删除按钮显示与隐藏）</p>
<p><strong>&gt;&gt;Item&#x2F;index.js</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Item</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br>  <span class="hljs-comment">// 标识鼠标移入移出</span><br>  state = &#123;<br>    <span class="hljs-attr">mouse</span>: <span class="hljs-literal">false</span><br>  &#125;<br>  <span class="hljs-comment">// 鼠标移入移出的回调</span><br>  handleMouse = <span class="hljs-function">(<span class="hljs-params">flag</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> &#123;<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123;<span class="hljs-attr">mouse</span>: flag&#125;)<br>    &#125;<br>  &#125;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span> &#123; name, done &#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span><br>    <span class="hljs-keyword">const</span> &#123;mouse&#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span><br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">li</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;&#123;</span> <span class="hljs-attr">backgroundColor:</span> <span class="hljs-attr">mouse</span> ? &#x27;#<span class="hljs-attr">ddd</span>&#x27; <span class="hljs-attr">:</span> &#x27;<span class="hljs-attr">white</span>&#x27; &#125;&#125;</span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onMouseEnter</span>=<span class="hljs-string">&#123;this.handleMouse(true)&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onMouseLeave</span>=<span class="hljs-string">&#123;this.handleMouse(false)&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">      &gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span> <span class="hljs-attr">defaultChecked</span>=<span class="hljs-string">&#123;done&#125;/</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#123;name&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;btn btn-danger&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;&#123;display:</span> <span class="hljs-attr">mouse</span>?&#x27;<span class="hljs-attr">block</span>&#x27;<span class="hljs-attr">:</span>&#x27;<span class="hljs-attr">none</span>&#x27;&#125;&#125;&gt;</span>删除<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>


<h2 id="5-4-勾选-改变-状态"><a href="#5-4-勾选-改变-状态" class="headerlink" title="5.4 勾选 改变 状态"></a>5.4 勾选 改变 状态</h2><p>勾选前面的选中框，要改变到state中的数据</p>
<p>根据选中的框所属的todo的id找到数据，根据更改后done的值更新相应的done的值</p>
<p><strong>&gt;&gt;App.jsx</strong></p>
<p>在父组件中定义一个更新todo的函数，然后传递给子组件</p>
<p>根据拿到的id和done的值，来更新状态state中相应id数据的值</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br>  <span class="hljs-comment">// 用于更新一个todo</span><br>  updateTodo = <span class="hljs-function">(<span class="hljs-params">id, done</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> &#123; todos &#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span><br>    <span class="hljs-keyword">const</span> newTodos = todos.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">todo</span>) =&gt;</span> &#123;<br>      <span class="hljs-keyword">if</span> (todo.<span class="hljs-property">id</span> === id) &#123;<br>        <span class="hljs-keyword">return</span> &#123;...todo, <span class="hljs-attr">done</span>: done&#125;<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">return</span> todo<br>      &#125;<br>    &#125;)<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123;<span class="hljs-attr">todos</span>: newTodos&#125;)<br>  &#125;<br>  <br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span>  &#123;todos&#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span><br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;todo-container&quot;</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;todo-warp&quot;</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">Header</span> <span class="hljs-attr">addTodo</span>=<span class="hljs-string">&#123;this.addTodo&#125;</span> /&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">List</span> <span class="hljs-attr">todos</span>=<span class="hljs-string">&#123;todos&#125;</span> <span class="hljs-attr">updateTodo</span>=<span class="hljs-string">&#123;this.updateTodo&#125;/</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">Footer</span> /&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>


<p><strong>&gt;&gt;List&#x2F;index.jsx</strong></p>
<p>中转 从父组件App中传过来的函数，继续传给它的子组件Item，完成祖孙组件中的通信</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">List</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span> &#123;todos, updateTodo&#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span><br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;todo-main&quot;</span>&gt;</span></span><br><span class="language-xml">        &#123;</span><br><span class="language-xml">          todos.map((todo) =&gt; &#123;</span><br><span class="language-xml">            return <span class="hljs-tag">&lt;<span class="hljs-name">Item</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;todo.id&#125;</span> &#123;<span class="hljs-attr">...todo</span>&#125; <span class="hljs-attr">updateTodo</span>=<span class="hljs-string">&#123;updateTodo&#125;/</span>&gt;</span></span><br><span class="language-xml">          &#125;)</span><br><span class="language-xml">        &#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>


<p><strong>&gt;&gt;Item&#x2F;index.jsx</strong></p>
<p>通过List中转终于拿到祖先组件App中的函数updateTodo</p>
<p>组件中定义onChange事件的回调函数handleCheck ，【高阶函数+柯里化】</p>
<p>在回调函数中返回传递过来的函数并传入参数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Item</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br>  <span class="hljs-comment">// 勾选、取消勾选todo的回调</span><br>  handleCheck = <span class="hljs-function">(<span class="hljs-params">id</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> &#123;<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-title function_">updateTodo</span>(id, event.<span class="hljs-property">target</span>.<span class="hljs-property">checked</span>)<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span> &#123; id, name, done &#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span><br>    <span class="hljs-keyword">const</span> &#123;mouse&#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span><br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">li</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;&#123;</span> <span class="hljs-attr">backgroundColor:</span> <span class="hljs-attr">mouse</span> ? &#x27;#<span class="hljs-attr">ddd</span>&#x27; <span class="hljs-attr">:</span> &#x27;<span class="hljs-attr">white</span>&#x27; &#125;&#125;</span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onMouseEnter</span>=<span class="hljs-string">&#123;this.handleMouse(true)&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onMouseLeave</span>=<span class="hljs-string">&#123;this.handleMouse(false)&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">      &gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span> <span class="hljs-attr">defaultChecked</span>=<span class="hljs-string">&#123;done&#125;</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;</span> <span class="hljs-attr">this.handleCheck</span>(<span class="hljs-attr">id</span>) &#125;/&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#123;name&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;btn btn-danger&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;&#123;display:mouse?</span>&#x27;<span class="hljs-attr">block</span>&#x27;<span class="hljs-attr">:</span>&#x27;<span class="hljs-attr">none</span>&#x27;&#125;&#125;&gt;</span>删除<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="5-5-对props进行限制"><a href="#5-5-对props进行限制" class="headerlink" title="5.5 对props进行限制"></a>5.5 对props进行限制</h2><p>类型及必要性设置</p>
<p>自行安装 prop-types 库 npm i prop-types</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">PropTypes</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;prop-types&#x27;</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Header</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br>  <span class="hljs-comment">// 对接收的props进行类型以及必要性的限制</span><br>  <span class="hljs-keyword">static</span> propTypes = &#123;<br>    <span class="hljs-attr">addTodo</span>: <span class="hljs-title class_">PropTypes</span>.<span class="hljs-property">func</span>.<span class="hljs-property">isRequired</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">PropTypes</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;prop-types&#x27;</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">List</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br>  <span class="hljs-comment">// 对接收的props进行类型以及必要性的限制</span><br>  <span class="hljs-keyword">static</span> propTypes = &#123;<br>      <span class="hljs-attr">todos</span>: <span class="hljs-title class_">PropTypes</span>.<span class="hljs-property">array</span>.<span class="hljs-property">isRequired</span>,<br>      <span class="hljs-attr">updateTodo</span>: <span class="hljs-title class_">PropTypes</span>.<span class="hljs-property">func</span>.<span class="hljs-property">isRequired</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">PropTypes</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;prop-types&#x27;</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Item</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br>  <span class="hljs-comment">// 对接收的props进行类型以及必要性的限制</span><br>  <span class="hljs-keyword">static</span> propTypes = &#123;<br>    <span class="hljs-attr">updateTodo</span>: <span class="hljs-title class_">PropTypes</span>.<span class="hljs-property">func</span>.<span class="hljs-property">isRequired</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="5-5-删除一个todo"><a href="#5-5-删除一个todo" class="headerlink" title="5.5 删除一个todo"></a>5.5 删除一个todo</h2><p>选中一个todo，点击删除按钮，删除这个todo</p>
<p><strong>&gt;&gt;App.jsx</strong></p>
<p>因为状态数据在父组件中，所以删除todo的函数就定义在App中</p>
<p>然后将函数传递给子组件</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br>  <span class="hljs-comment">// 用于删除一个todo</span><br>  deleteTodo = <span class="hljs-function">(<span class="hljs-params">id</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> &#123; todos &#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span><br>    <span class="hljs-keyword">const</span> newTodos = todos.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">todo</span>) =&gt;</span> &#123;<br>      <span class="hljs-keyword">return</span> todo.<span class="hljs-property">id</span> !== id<br>    &#125;)<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123;<span class="hljs-attr">todos</span>:newTodos&#125;)<br>  &#125;<br>  <br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span>  &#123;todos&#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span><br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;todo-container&quot;</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;todo-warp&quot;</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">Header</span> <span class="hljs-attr">addTodo</span>=<span class="hljs-string">&#123;this.addTodo&#125;</span> /&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">List</span> <span class="hljs-attr">todos</span>=<span class="hljs-string">&#123;todos&#125;</span> <span class="hljs-attr">updateTodo</span>=<span class="hljs-string">&#123;this.updateTodo&#125;</span> <span class="hljs-attr">deleteTodo</span>=<span class="hljs-string">&#123;this.deleteTodo&#125;</span> /&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">Footer</span> /&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    );<br>  &#125;<br></code></pre></td></tr></table></figure>


<p><strong>&gt;&gt;List&#x2F;index.jsx</strong></p>
<p>中转拿到和函数继续传递</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">List</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br>  <span class="hljs-comment">// 对接收的props进行类型以及必要性的限制</span><br>  <span class="hljs-keyword">static</span> propTypes = &#123;<br>    <span class="hljs-attr">todos</span>: <span class="hljs-title class_">PropTypes</span>.<span class="hljs-property">array</span>.<span class="hljs-property">isRequired</span>,<br>    <span class="hljs-attr">updateTodo</span>: <span class="hljs-title class_">PropTypes</span>.<span class="hljs-property">func</span>.<span class="hljs-property">isRequired</span>,<br>    <span class="hljs-attr">deleteTodo</span>: <span class="hljs-title class_">PropTypes</span>.<span class="hljs-property">func</span>.<span class="hljs-property">isRequired</span><br>  &#125;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span> &#123;todos, updateTodo, deleteTodo&#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span><br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;todo-main&quot;</span>&gt;</span></span><br><span class="language-xml">        &#123;</span><br><span class="language-xml">          todos.map((todo) =&gt; &#123;</span><br><span class="language-xml">            return <span class="hljs-tag">&lt;<span class="hljs-name">Item</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;todo.id&#125;</span> &#123;<span class="hljs-attr">...todo</span>&#125; <span class="hljs-attr">updateTodo</span>=<span class="hljs-string">&#123;updateTodo&#125;</span> <span class="hljs-attr">deleteTodo</span>=<span class="hljs-string">&#123;</span> <span class="hljs-attr">deleteTodo</span> &#125;/&gt;</span></span><br><span class="language-xml">          &#125;)</span><br><span class="language-xml">        &#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>


<p><strong>&gt;&gt;Item&#x2F;index.jsx</strong><br>得到传递到的函数，将id作为函数参数传递给父组件</p>
<p>定义绑定点击事件 这次没用高阶函数，换了一种写法，效果是一样的</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Item</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br>  <span class="hljs-comment">// 对接收的props进行类型以及必要性的限制</span><br>  <span class="hljs-keyword">static</span> propTypes = &#123;<br>    <span class="hljs-attr">updateTodo</span>: <span class="hljs-title class_">PropTypes</span>.<span class="hljs-property">func</span>.<span class="hljs-property">isRequired</span>,<br>    <span class="hljs-attr">deleteTodo</span>: <span class="hljs-title class_">PropTypes</span>.<span class="hljs-property">func</span>.<span class="hljs-property">isRequired</span><br>  &#125;<br>  <span class="hljs-comment">// 删除一个todo的回调</span><br>  handleDelete = <span class="hljs-function">(<span class="hljs-params">id</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">confirm</span>(<span class="hljs-string">`确定删除嘛？`</span>)) &#123;<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-title function_">deleteTodo</span>(id)<br>    &#125;<br>  &#125;<br>  <br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span> &#123; id, name, done &#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span><br>    <span class="hljs-keyword">const</span> &#123;mouse&#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span><br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">li</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;&#123;</span> <span class="hljs-attr">backgroundColor:</span> <span class="hljs-attr">mouse</span> ? &#x27;#<span class="hljs-attr">ddd</span>&#x27; <span class="hljs-attr">:</span> &#x27;<span class="hljs-attr">white</span>&#x27; &#125;&#125;</span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onMouseEnter</span>=<span class="hljs-string">&#123;this.handleMouse(true)&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onMouseLeave</span>=<span class="hljs-string">&#123;this.handleMouse(false)&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">      &gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span> <span class="hljs-attr">defaultChecked</span>=<span class="hljs-string">&#123;done&#125;</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;</span> <span class="hljs-attr">this.handleCheck</span>(<span class="hljs-attr">id</span>) &#125;/&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#123;name&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;</span> () =&gt;</span> this.handleDelete(id) &#125; className=&quot;btn btn-danger&quot; style=&#123;&#123;display:mouse?&#x27;block&#x27;:&#x27;none&#x27;&#125;&#125;&gt;删除<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>


<p>##5.6 底部Footer</p>
<p><strong>&gt;&gt;App.jsx</strong></p>
<p>在App中将todos传给Footer</p>
<p>在App中定义全选和全不选的todos来更新状态</p>
<p>在App中定义清除所有已完成的todo</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br>  <span class="hljs-comment">// 用于全选</span><br>  checkAll = <span class="hljs-function">(<span class="hljs-params">done</span>) =&gt;</span> &#123;<br>    <span class="hljs-comment">// 获取原来的todos</span><br>    <span class="hljs-keyword">const</span> &#123; todos &#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span><br>    <span class="hljs-comment">// 过滤数据</span><br>    <span class="hljs-keyword">const</span> newTodos = todos.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">todo</span>) =&gt;</span> &#123;<br>      <span class="hljs-keyword">return</span> &#123;...todo, <span class="hljs-attr">done</span>: done&#125;<br>    &#125;)<br>    <span class="hljs-comment">// 更新状态</span><br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123;<span class="hljs-attr">todos</span>: newTodos&#125;)<br>  &#125;<br>  <span class="hljs-comment">// 清除所有已经完成的</span><br>  clearAllDone = <span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> &#123; todos &#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span><br>    <span class="hljs-keyword">const</span> newTodos = todos.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">todo</span>) =&gt;</span> &#123;<br>      <span class="hljs-keyword">return</span> !todo.<span class="hljs-property">done</span><br>    &#125;)<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123;<span class="hljs-attr">todos</span>: newTodos&#125;)<br>  &#125;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span>  &#123;todos&#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span><br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;todo-container&quot;</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;todo-warp&quot;</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">Header</span> <span class="hljs-attr">addTodo</span>=<span class="hljs-string">&#123;this.addTodo&#125;</span> /&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">List</span> <span class="hljs-attr">todos</span>=<span class="hljs-string">&#123;todos&#125;</span> <span class="hljs-attr">updateTodo</span>=<span class="hljs-string">&#123;this.updateTodo&#125;</span> <span class="hljs-attr">deleteTodo</span>=<span class="hljs-string">&#123;this.deleteTodo&#125;</span> /&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">Footer</span> <span class="hljs-attr">todos</span>=<span class="hljs-string">&#123;todos&#125;</span> <span class="hljs-attr">checkAll</span>=<span class="hljs-string">&#123;this.checkAll&#125;</span> <span class="hljs-attr">clearAllDone</span>=<span class="hljs-string">&#123;this.clearAllDone&#125;</span> /&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>&gt;&gt;Footer&#x2F;index.jsx</strong><br>拿到todos</p>
<p>用来计算两个数据doneCount和total，显示在页面中</p>
<p>定义两个回调函数handleCheckAll和handleClearAllDone</p>
<p>再从父组件接收两个函数然后调用</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Footer</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br>  <span class="hljs-comment">// 全选</span><br>  handleCheckAll = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-title function_">checkAll</span>(event.<span class="hljs-property">target</span>.<span class="hljs-property">checked</span>)<br>  &#125;<br>  <span class="hljs-comment">// 清除所有已完成的回调</span><br>  handleClearAllDone = <span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-title function_">clearAllDone</span>()<br>  &#125;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span> &#123; todos &#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span><br>    <span class="hljs-comment">// 计算已完成</span><br>    <span class="hljs-keyword">const</span> doneCount = todos.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">pre, todo</span>) =&gt;</span> &#123; <span class="hljs-keyword">return</span> pre + (todo.<span class="hljs-property">done</span> ? <span class="hljs-number">1</span>: <span class="hljs-number">0</span>) &#125;, <span class="hljs-number">0</span>)<br>    <span class="hljs-comment">// 计算总数</span><br>    <span class="hljs-keyword">const</span> total = todos.<span class="hljs-property">length</span><br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;todo-footer&quot;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;this.handleCheckAll&#125;</span> <span class="hljs-attr">checked</span>=<span class="hljs-string">&#123;doneCount</span> === <span class="hljs-string">total</span> &amp;&amp; <span class="hljs-attr">total</span> !== <span class="hljs-string">0</span> ? <span class="hljs-attr">true:</span> <span class="hljs-attr">false</span> &#125;/&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>已完成&#123; doneCount &#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> / 全部&#123;total&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;this.handleClearAllDone&#125;</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;btn btn-danger&quot;</span>&gt;</span>清除已完成任务<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>


<h1 id="6-总结"><a href="#6-总结" class="headerlink" title="6. 总结"></a>6. 总结</h1><p>拆分组件、实现静态组件，注意：className、style的写法</p>
<p>动态初始化列表，如何确定将数据放在哪个组件的state中？</p>
<p>某个组件使用：放在其 自身 的state中</p>
<p>某些组件使用：放在他们共同的 父组件 state中（官方称此操作为：状态提升）</p>
<p>关于父子之间通信：</p>
<p>【父组件】给【子组件】传递数据：通过props传递</p>
<p>【子组件】给【父组件】传递数据：通过props传递，要求父提前给子传递一个函数</p>
<p>注意defaultChecked （只在第一次指定的时候有作用，之后就没作用了）和 checked的区别，类似的还有：defaultValue 和 value<br>状态在哪里，操作状态的方法就在哪里</p>
<p><img src="https://user-images.githubusercontent.com/117837871/220587169-d8c3072c-e800-46c0-8db2-83abd26f2911.png" srcset="/img/loading.gif" lazyload alt="image"></p>
<p><img src="https://user-images.githubusercontent.com/117837871/220587280-1a81ccc3-a9b7-4012-aeed-b8959acf65a0.png" srcset="/img/loading.gif" lazyload alt="image"></p>
<p><img src="https://user-images.githubusercontent.com/117837871/220587310-7b5ec9e9-8c6b-4929-b215-130d49d0e17a.png" srcset="/img/loading.gif" lazyload alt="image"></p>
<p>注意defaultChecked （只在第一次指定的时候有作用，之后就没作用了）和 checked的区别，类似的还有：defaultValue 和 value</p>
<h1 id="用户搜索页面与配置代理"><a href="#用户搜索页面与配置代理" class="headerlink" title="用户搜索页面与配置代理"></a>用户搜索页面与配置代理</h1><p>今天我们使用React做一个需要发起ajax请求的小demo（github用户搜索页面），我们先使用axios实现，最后再实现一个fetch版本的。</p>
<p>这中间我们还会在React中配置代理来解决跨域问题，还会使用消息订阅与发布模式改进我们的代码。</p>
<h2 id="1-理解"><a href="#1-理解" class="headerlink" title="1. 理解"></a>1. 理解</h2><p>之前也学习过ajax和axios，可以先看看这两个笔记复习一下ajax</p>
<p><a target="_blank" rel="noopener" href="https://juejin.cn/post/6999604180432191519">【Ajax】HTTP相关问题-GET-POST-XHR使用-jQuery中的ajax-跨域-同源-jsonp-cors</a></p>
<p><a target="_blank" rel="noopener" href="https://juejin.cn/post/7015487317582299144">【Axios】使用json-server 搭建REST API - 使用axios - 自定义axios - 取消请求 - 拦截器</a></p>
<h3 id="1-1-前置说明"><a href="#1-1-前置说明" class="headerlink" title="1.1. 前置说明"></a>1.1. 前置说明</h3><p>React本身只关注于界面, 并不包含发送<strong>ajax</strong>请求的代码</p>
<p>前端应用需要通过ajax请求与后台进行交互(json数据)</p>
<p>React应用中需要集成第三方ajax库(或自己封装)</p>
<h3 id="1-2-常用的ajax请求库"><a href="#1-2-常用的ajax请求库" class="headerlink" title="1.2. 常用的ajax请求库"></a>1.2. 常用的ajax请求库</h3><p>jQuery: 比较重, 如果需要另外引入不建议使用</p>
<p>axios: 轻量级, 建议使用</p>
<pre><code class="hljs">1.封装XmlHttpRequest对象的ajax

2.promise风格

3.可以用在浏览器端和node服务器端
</code></pre>
<h2 id="2-axios"><a href="#2-axios" class="headerlink" title="2. axios"></a>2. axios</h2><p>安装<strong>npm install axios</strong></p>
<h3 id="2-1-文档"><a href="#2-1-文档" class="headerlink" title="2.1. 文档"></a>2.1. 文档</h3><p>Github.com&#x2F;axios&#x2F;axios</p>
<h3 id="2-2-相关API"><a href="#2-2-相关API" class="headerlink" title="2.2. 相关API"></a>2.2. 相关API</h3><p>更多细节可以参考这个笔记的内容 <a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_44972008/article/details/114368528">【axios】使用json-server 搭建REST API - 使用axios - 自定义axios - 取消请求 - 拦截器</a></p>
<h2 id="3-React中配置代理解决跨域问题"><a href="#3-React中配置代理解决跨域问题" class="headerlink" title="3. React中配置代理解决跨域问题"></a>3. React中配置代理解决跨域问题</h2><h3 id="3-1-配置代理方法"><a href="#3-1-配置代理方法" class="headerlink" title="3.1 配置代理方法"></a>3.1 配置代理方法</h3><p>解决跨域问题，在React开启中间代理</p>
<p>在项目中的package.json中，最后加上一行”proxy”: “<a target="_blank" rel="noopener" href="http://loaclhost:5000/">http://loaclhost:5000</a>“ 写到端口号</p>
<p>然后重启脚手架</p>
<p>再次发送请求的时候就直接写自己的3000端口</p>
<p>3000端口有的资源直接请求3000端口的，3000端口没有的资源就请求代理设置的5000端口</p>
<p>在package.json中追加如下配置</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-string">&quot;proxy&quot;</span>:<span class="hljs-string">&quot;http://localhost:5000&quot;</span><br></code></pre></td></tr></table></figure>

<p>说明：</p>
<pre><code class="hljs">优点：配置简单，前端请求资源时可以不加任何前缀。

配置多个代理。

工作方式：上述方式配置代理，当请求了3000不存在的资源时，那么该请求会转发给5000 （优先匹配前端资源）
</code></pre>
<h3 id="3-2-配置多个代理方法"><a href="#3-2-配置多个代理方法" class="headerlink" title="3.2 配置多个代理方法"></a>3.2 配置多个代理方法</h3><p>配置多个代理，不在 package.json 配置</p>
<pre><code class="hljs">第一步：创建代理配置文件
</code></pre>
<p>在src下创建配置文件：src&#x2F;setupProxy.js</p>
<pre><code class="hljs">编写setupProxy.js配置具体代理规则：
</code></pre>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> proxy = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;http-proxy-middleware&#x27;</span>)<br><br><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">app</span>) &#123;<br>  app.<span class="hljs-title function_">use</span>(<br>    <span class="hljs-title function_">proxy</span>(<span class="hljs-string">&#x27;/api1&#x27;</span>, &#123;  <span class="hljs-comment">//api1是需要转发的请求(所有带有/api1前缀的请求都会转发给5000)</span><br>      <span class="hljs-attr">target</span>: <span class="hljs-string">&#x27;http://localhost:5000&#x27;</span>, <span class="hljs-comment">//配置转发目标地址(能返回数据的服务器地址)</span><br>      <span class="hljs-attr">changeOrigin</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">//控制服务器接收到的请求头中host字段的值</span><br>      <span class="hljs-comment">/*</span><br><span class="hljs-comment">      	changeOrigin设置为true时，服务器收到的请求头中的host为：localhost:5000</span><br><span class="hljs-comment">      	changeOrigin设置为false时，服务器收到的请求头中的host为：localhost:3000</span><br><span class="hljs-comment">      	changeOrigin默认值为false，但我们一般将changeOrigin值设为true</span><br><span class="hljs-comment">      */</span><br>      <span class="hljs-attr">pathRewrite</span>: &#123;<span class="hljs-string">&#x27;^/api1&#x27;</span>: <span class="hljs-string">&#x27;&#x27;</span>&#125; <span class="hljs-comment">//去除请求前缀，保证交给后台服务器的是正常请求地址(必须配置)</span><br>    &#125;),<br>    <span class="hljs-title function_">proxy</span>(<span class="hljs-string">&#x27;/api2&#x27;</span>, &#123; <br>      <span class="hljs-attr">target</span>: <span class="hljs-string">&#x27;http://localhost:5001&#x27;</span>,<br>      <span class="hljs-attr">changeOrigin</span>: <span class="hljs-literal">true</span>,<br>      <span class="hljs-attr">pathRewrite</span>: &#123;<span class="hljs-string">&#x27;^/api2&#x27;</span>: <span class="hljs-string">&#x27;&#x27;</span>&#125;<br>    &#125;)<br>  )<br>&#125;<br></code></pre></td></tr></table></figure>

<p>说明：<br>1.优点：可以配置多个代理，可以灵活的控制请求是否走代理。</p>
<p>2.缺点：配置繁琐，前端请求资源时必须加前缀。</p>
<h2 id="4-案例—github用户搜索"><a href="#4-案例—github用户搜索" class="headerlink" title="4. 案例—github用户搜索"></a>4. 案例—github用户搜索</h2><p>之前用Vue也做过这个案例，可以对比着学习 <a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_44972008/article/details/113992327">【Vue】高级系列（七）Vue-cli配置代理 - Ajax实战-demo3-GitHub用户查询-axios-pubsub</a></p>
<h3 id="4-1-效果"><a href="#4-1-效果" class="headerlink" title="4.1 效果"></a>4.1 效果</h3><p>请求地址: <a target="_blank" rel="noopener" href="https://api.github.com/search/users?q=xxxxxx">https://api.github.com/search/users?q=xxxxxx</a></p>
<p><a target="_blank" rel="noopener" href="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e17bce649e774e089e6b423830c2a28e~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp">https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e17bce649e774e089e6b423830c2a28e~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp</a></p>
<h3 id="4-2-React-实现"><a href="#4-2-React-实现" class="headerlink" title="4.2 React 实现"></a>4.2 React 实现</h3><h4 id="4-2-1-静态页面拆分实现"><a href="#4-2-1-静态页面拆分实现" class="headerlink" title="4.2.1 静态页面拆分实现"></a>4.2.1 静态页面拆分实现</h4><p><strong>&gt;&gt;App.jsx</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; <span class="hljs-title class_">Component</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Search</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./Search&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Users</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./Users&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;container&quot;</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Search</span> /&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Users</span> /&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>&gt;&gt;Search&#x2F;index.js</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; <span class="hljs-title class_">Component</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Search</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">section</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;jumbotron&quot;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;jumbotron-heading&quot;</span>&gt;</span>搜索Github用户<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;请输入你要搜索的用户名&quot;</span> /&gt;</span><span class="hljs-symbol">&amp;nbsp;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>搜索<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><strong>&gt;&gt;User&#x2F;index.jsx</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; <span class="hljs-title class_">Component</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./index.css&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Users</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;row&quot;</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;card&quot;</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;noreferrer&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;https://github.com/reactjs&quot;</span> <span class="hljs-attr">target</span>=<span class="hljs-string">&quot;_blank&quot;</span>&gt;</span></span><br><span class="language-xml">              <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;avatar&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://avatars.githubusercontent.com/u/6412038?v=3&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;&#123;</span> &#x27;<span class="hljs-attr">width</span>&#x27;<span class="hljs-attr">:</span> &#x27;<span class="hljs-attr">100px</span>&#x27; &#125;&#125;/&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;card-text&quot;</span>&gt;</span>reactjs<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;card&quot;</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;noreferrer&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;https://github.com/reactjs&quot;</span> <span class="hljs-attr">target</span>=<span class="hljs-string">&quot;_blank&quot;</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;avatar&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://avatars.githubusercontent.com/u/6412038?v=3&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;&#123;</span> &#x27;<span class="hljs-attr">width</span>&#x27;<span class="hljs-attr">:</span> &#x27;<span class="hljs-attr">100px</span>&#x27; &#125;&#125;/&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;card-text&quot;</span>&gt;</span>reactjs<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;card&quot;</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;noreferrer&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;https://github.com/reactjs&quot;</span> <span class="hljs-attr">target</span>=<span class="hljs-string">&quot;_blank&quot;</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;avatar&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://avatars.githubusercontent.com/u/6412038?v=3&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;&#123;</span> &#x27;<span class="hljs-attr">width</span>&#x27;<span class="hljs-attr">:</span> &#x27;<span class="hljs-attr">100px</span>&#x27; &#125;&#125;/&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;card-text&quot;</span>&gt;</span>reactjs<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;card&quot;</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;noreferrer&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;https://github.com/reactjs&quot;</span> <span class="hljs-attr">target</span>=<span class="hljs-string">&quot;_blank&quot;</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;avatar&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://avatars.githubusercontent.com/u/6412038?v=3&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;&#123;</span> &#x27;<span class="hljs-attr">width</span>&#x27;<span class="hljs-attr">:</span> &#x27;<span class="hljs-attr">100px</span>&#x27; &#125;&#125;/&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;card-text&quot;</span>&gt;</span>reactjs<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;card&quot;</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;noreferrer&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;https://github.com/reactjs&quot;</span> <span class="hljs-attr">target</span>=<span class="hljs-string">&quot;_blank&quot;</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;avatar&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://avatars.githubusercontent.com/u/6412038?v=3&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;&#123;</span> &#x27;<span class="hljs-attr">width</span>&#x27;<span class="hljs-attr">:</span> &#x27;<span class="hljs-attr">100px</span>&#x27; &#125;&#125;/&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;card-text&quot;</span>&gt;</span>reactjs<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>&gt;&gt;User&#x2F;index.css</strong></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.album</span> &#123;<br>  <span class="hljs-attribute">min-height</span>: <span class="hljs-number">50rem</span>; <span class="hljs-comment">/* Can be removed; just added for demo purposes */</span><br>  <span class="hljs-attribute">padding-top</span>: <span class="hljs-number">3rem</span>;<br>  <span class="hljs-attribute">padding-bottom</span>: <span class="hljs-number">3rem</span>;<br>  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f7f7f7</span>;<br>&#125;<br><br><span class="hljs-selector-class">.card</span> &#123;<br>  <span class="hljs-attribute">float</span>: left;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">33.333%</span>;<br>  <span class="hljs-attribute">padding</span>: .<span class="hljs-number">75rem</span>;<br>  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">2rem</span>;<br>  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#efefef</span>;<br>  <span class="hljs-attribute">text-align</span>: center;<br>&#125;<br><br><span class="hljs-selector-class">.card</span> &gt; <span class="hljs-selector-tag">img</span> &#123;<br>  <span class="hljs-attribute">margin-bottom</span>: .<span class="hljs-number">75rem</span>;<br>  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">100px</span>;<br>&#125;<br><br><span class="hljs-selector-class">.card-text</span> &#123;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">85%</span>;<br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="4-2-2-动态交互实现"><a href="#4-2-2-动态交互实现" class="headerlink" title="4.2.2 动态交互实现"></a>4.2.2 动态交互实现</h4><p>由于github访问失败，可以伪造一个服务器返回一些固定的结果，让用户体验更佳 使用express搭建一个服务器</p>
<p><strong>&gt;&gt;serve.js</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;express&quot;</span>)<br><span class="hljs-keyword">const</span> axios = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;axios&quot;</span>)<br><span class="hljs-keyword">const</span> app = <span class="hljs-title function_">express</span>()<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">  请求地址： http://localhost:3000/search/users?q=aa</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">  后台路由</span><br><span class="hljs-comment">    key： /search/users</span><br><span class="hljs-comment">    value： function () &#123;&#125;</span><br><span class="hljs-comment">*/</span><br>app.<span class="hljs-title function_">get</span>(<span class="hljs-string">&quot;/search/users&quot;</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">req, res</span>) &#123;<br>  <span class="hljs-keyword">const</span> &#123;q&#125; = req.<span class="hljs-property">query</span><br>  <span class="hljs-title function_">axios</span>(&#123;<br>    <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;https://api.github.com/search/users&#x27;</span>,<br>    <span class="hljs-attr">params</span>: &#123;q&#125;<br>  &#125;).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> &#123;<br>    res.<span class="hljs-title function_">json</span>(response.<span class="hljs-property">data</span>)<br>  &#125;)<br>&#125;)<br><br>app.<span class="hljs-title function_">get</span>(<span class="hljs-string">&quot;/search/users2&quot;</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">req, res</span>) &#123;<br>  res.<span class="hljs-title function_">json</span>(&#123;<br>    <span class="hljs-attr">items</span>: [<br>      &#123;<br>        <span class="hljs-attr">login</span>: <span class="hljs-string">&quot;yyx990803&quot;</span>,<br>        <span class="hljs-attr">html_url</span>: <span class="hljs-string">&quot;https://github.com/yyx990803&quot;</span>,<br>        <span class="hljs-attr">avatar_url</span>:<br>          <span class="hljs-string">&quot;https://avatars3.githubusercontent.com/u/499550?s=460&amp;u=de41ec9325e8a92e281b96a1514a0fd1cd81ad4a&amp;v=4&quot;</span>,<br>        <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>,<br>      &#125;,<br>      &#123;<br>        <span class="hljs-attr">login</span>: <span class="hljs-string">&quot;ruanyf&quot;</span>,<br>        <span class="hljs-attr">html_url</span>: <span class="hljs-string">&quot;https://github.com/ruanyf&quot;</span>,<br>        <span class="hljs-attr">avatar_url</span>: <span class="hljs-string">&quot;https://avatars2.githubusercontent.com/u/905434?s=460&amp;v=4&quot;</span>,<br>        <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>,<br>      &#125;,<br>      &#123;<br>        <span class="hljs-attr">login</span>: <span class="hljs-string">&quot;yyx9908032&quot;</span>,<br>        <span class="hljs-attr">html_url</span>: <span class="hljs-string">&quot;https://github.com/yyx990803&quot;</span>,<br>        <span class="hljs-attr">avatar_url</span>:<br>          <span class="hljs-string">&quot;https://avatars3.githubusercontent.com/u/499550?s=460&amp;u=de41ec9325e8a92e281b96a1514a0fd1cd81ad4a&amp;v=4&quot;</span>,<br>        <span class="hljs-attr">id</span>: <span class="hljs-number">3</span>,<br>      &#125;,<br>      &#123;<br>        <span class="hljs-attr">login</span>: <span class="hljs-string">&quot;ruanyf2&quot;</span>,<br>        <span class="hljs-attr">html_url</span>: <span class="hljs-string">&quot;https://github.com/ruanyf&quot;</span>,<br>        <span class="hljs-attr">avatar_url</span>: <span class="hljs-string">&quot;https://avatars2.githubusercontent.com/u/905434?s=460&amp;v=4&quot;</span>,<br>        <span class="hljs-attr">id</span>: <span class="hljs-number">4</span>,<br>      &#125;,<br>      &#123;<br>        <span class="hljs-attr">login</span>: <span class="hljs-string">&quot;yyx9908033&quot;</span>,<br>        <span class="hljs-attr">html_url</span>: <span class="hljs-string">&quot;https://github.com/yyx990803&quot;</span>,<br>        <span class="hljs-attr">avatar_url</span>:<br>          <span class="hljs-string">&quot;https://avatars3.githubusercontent.com/u/499550?s=460&amp;u=de41ec9325e8a92e281b96a1514a0fd1cd81ad4a&amp;v=4&quot;</span>,<br>        <span class="hljs-attr">id</span>: <span class="hljs-number">5</span>,<br>      &#125;,<br>      &#123;<br>        <span class="hljs-attr">login</span>: <span class="hljs-string">&quot;ruanyf3&quot;</span>,<br>        <span class="hljs-attr">html_url</span>: <span class="hljs-string">&quot;https://github.com/ruanyf&quot;</span>,<br>        <span class="hljs-attr">avatar_url</span>: <span class="hljs-string">&quot;https://avatars2.githubusercontent.com/u/905434?s=460&amp;v=4&quot;</span>,<br>        <span class="hljs-attr">id</span>: <span class="hljs-number">6</span>,<br>      &#125;,<br>      &#123;<br>        <span class="hljs-attr">login</span>: <span class="hljs-string">&quot;yyx9908034&quot;</span>,<br>        <span class="hljs-attr">html_url</span>: <span class="hljs-string">&quot;https://github.com/yyx990803&quot;</span>,<br>        <span class="hljs-attr">avatar_url</span>:<br>          <span class="hljs-string">&quot;https://avatars3.githubusercontent.com/u/499550?s=460&amp;u=de41ec9325e8a92e281b96a1514a0fd1cd81ad4a&amp;v=4&quot;</span>,<br>        <span class="hljs-attr">id</span>: <span class="hljs-number">7</span>,<br>      &#125;,<br>      &#123;<br>        <span class="hljs-attr">login</span>: <span class="hljs-string">&quot;ruanyf4&quot;</span>,<br>        <span class="hljs-attr">html_url</span>: <span class="hljs-string">&quot;https://github.com/ruanyf&quot;</span>,<br>        <span class="hljs-attr">avatar_url</span>: <span class="hljs-string">&quot;https://avatars2.githubusercontent.com/u/905434?s=460&amp;v=4&quot;</span>,<br>        <span class="hljs-attr">id</span>: <span class="hljs-number">8</span>,<br>      &#125;,<br>      &#123;<br>        <span class="hljs-attr">login</span>: <span class="hljs-string">&quot;yyx9908035&quot;</span>,<br>        <span class="hljs-attr">html_url</span>: <span class="hljs-string">&quot;https://github.com/yyx990803&quot;</span>,<br>        <span class="hljs-attr">avatar_url</span>:<br>          <span class="hljs-string">&quot;https://avatars3.githubusercontent.com/u/499550?s=460&amp;u=de41ec9325e8a92e281b96a1514a0fd1cd81ad4a&amp;v=4&quot;</span>,<br>        <span class="hljs-attr">id</span>: <span class="hljs-number">9</span>,<br>      &#125;,<br>    ],<br>  &#125;);<br>&#125;);<br><br><br><br>app.<span class="hljs-title function_">listen</span>(<span class="hljs-number">5000</span>, <span class="hljs-string">&quot;localhost&quot;</span>, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">if</span> (!err)&#123;<br>  	<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;服务器启动成功&quot;</span>)<br>  	<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;请求github真实数据请访问：http://localhost:5000/search/users&quot;</span>)<br>  	<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;请求本地模拟数据请访问：http://localhost:5000/search/users2&quot;</span>)<br>  &#125; <br>  <span class="hljs-keyword">else</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(err);<br>&#125;)<br></code></pre></td></tr></table></figure>

<p>在这里插入图片描述</p>
<p><strong>src&#x2F;setupProxy.js</strong></p>
<p>设置代理服务器解决跨域问题src&#x2F;setupProxy.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> proxy = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;http-proxy-middleware&#x27;</span>)<br><br><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">app</span>) &#123;<br>  app.<span class="hljs-title function_">use</span>(<br>    <span class="hljs-title function_">proxy</span>(<span class="hljs-string">&#x27;/api1&#x27;</span>, &#123;  <span class="hljs-comment">//api1是需要转发的请求(所有带有/api1前缀的请求都会转发给5000)</span><br>      <span class="hljs-attr">target</span>: <span class="hljs-string">&#x27;http://localhost:5000&#x27;</span>, <span class="hljs-comment">//配置转发目标地址(能返回数据的服务器地址)</span><br>      <span class="hljs-attr">changeOrigin</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">//控制服务器接收到的请求头中host字段的值</span><br>      <span class="hljs-attr">pathRewrite</span>: &#123;<span class="hljs-string">&#x27;^/api1&#x27;</span>: <span class="hljs-string">&#x27;&#x27;</span>&#125; <span class="hljs-comment">//去除请求前缀，保证交给后台服务器的是正常请求地址(必须配置)</span><br>    &#125;)<br>  )<br>&#125;<br><br><span class="hljs-comment">// 【补充】连续解构赋值</span><br><span class="hljs-keyword">let</span> obj = &#123;<span class="hljs-attr">a</span>:&#123;<span class="hljs-attr">b</span>:&#123;<span class="hljs-attr">c</span>:<span class="hljs-number">1</span>&#125;&#125;&#125;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(a.<span class="hljs-property">b</span>.<span class="hljs-property">c</span>) <span class="hljs-comment">// 1</span><br><span class="hljs-keyword">const</span> &#123;<span class="hljs-attr">a</span>:&#123;<span class="hljs-attr">b</span>:&#123;c&#125;&#125;&#125; = obj<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(c) <span class="hljs-comment">// 1</span><br><br><span class="hljs-keyword">let</span> obj2 = &#123;<span class="hljs-attr">a</span>:&#123;<span class="hljs-attr">b</span>:<span class="hljs-number">1</span>&#125;&#125;<br><span class="hljs-keyword">const</span> &#123;<span class="hljs-attr">a</span>:&#123;<span class="hljs-attr">b</span>:data&#125;&#125; = obj2 <span class="hljs-comment">// 重命名</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data) <span class="hljs-comment">// 1</span><br></code></pre></td></tr></table></figure>

<p><strong>&gt;&gt;App.jsx</strong></p>
<p>将状态数据定义在App中 操作状态的方法放在App中</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br>  state = &#123;<br>    <span class="hljs-attr">users</span>: []<br>  &#125;<br>  saveUsers = <span class="hljs-function">(<span class="hljs-params">users</span>) =&gt;</span> &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123; users &#125;)<br>  &#125;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span> &#123;users&#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span><br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;container&quot;</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Search</span> <span class="hljs-attr">saveUsers</span>=<span class="hljs-string">&#123;this.saveUsers&#125;</span> /&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Users</span> <span class="hljs-attr">users</span>=<span class="hljs-string">&#123;users&#125;</span> /&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>&gt;&gt;Search&#x2F;index&#x2F;jsx</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Search</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br>  search = <span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-comment">// 获取用户输入(连续解构赋值+重命名)</span><br>    <span class="hljs-keyword">const</span> &#123;<span class="hljs-attr">keyWordElement</span>: &#123;<span class="hljs-attr">value</span>: keyWord&#125;&#125; = <span class="hljs-variable language_">this</span><br>    <span class="hljs-comment">// console.log(keyWord)</span><br>    <span class="hljs-comment">// 发送网络请求</span><br>    axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">`/api1/search/users?q=<span class="hljs-subst">$&#123;keyWord&#125;</span>`</span>).<span class="hljs-title function_">then</span>(<br>      <span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;成功&#x27;</span>)<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-title function_">saveUsers</span>(response.<span class="hljs-property">data</span>.<span class="hljs-property">items</span>)<br>      &#125;,<br>      <span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> &#123;<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;失败&#x27;</span>,error)&#125;<br>    )<br>  &#125;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">section</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;jumbotron&quot;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;jumbotron-heading&quot;</span>&gt;</span>搜索Github用户<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&#123;c</span> =&gt;</span> this.keyWordElement = c&#125; type=&quot;text&quot; placeholder=&quot;请输入你要搜索的用户名&quot; /&gt;<span class="hljs-symbol">&amp;nbsp;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;this.search&#125;</span>&gt;</span>搜索<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>&gt;&gt;Users&#x2F;index.jsx</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Users</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;row&quot;</span>&gt;</span></span><br><span class="language-xml">        &#123;</span><br><span class="language-xml">          this.props.users.map((userObj) =&gt; &#123;</span><br><span class="language-xml">            return (</span><br><span class="language-xml">              <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;userObj.id&#125;</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;card&quot;</span>&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;noreferrer&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&#123;userObj.html_url&#125;</span> <span class="hljs-attr">target</span>=<span class="hljs-string">&quot;_blank&quot;</span>&gt;</span></span><br><span class="language-xml">                    <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;avatar&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&#123;userObj.avatar_url&#125;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;&#123;</span> &#x27;<span class="hljs-attr">width</span>&#x27;<span class="hljs-attr">:</span> &#x27;<span class="hljs-attr">100px</span>&#x27; &#125;&#125;/&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;card-text&quot;</span>&gt;</span>&#123;userObj.login&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">              <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">            )</span><br><span class="language-xml">          &#125;)</span><br><span class="language-xml">        &#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>效果展示</p>
<p>在这里插入图片描述</p>
<h4 id="4-2-3-优化用户体验"><a href="#4-2-3-优化用户体验" class="headerlink" title="4.2.3 优化用户体验"></a>4.2.3 优化用户体验</h4><p>在Users组件中，应该不止只有用户列表页面，应该还有</p>
<pre><code class="hljs">1.欢迎使用界面【第一次打开页面】

2.搜索加载页面【点击按钮发送请求和接收到响应之间显示】

3.搜索失败页面【请求失败显示】
</code></pre>
<p>有四种不同的显示，那就需要不同的状态state来控制</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 初始化状态</span><br>state = &#123; <br>  <span class="hljs-attr">users</span>: [], <span class="hljs-comment">// users初始值</span><br>  <span class="hljs-attr">isFirst</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// 是否第一次打开页面</span><br>  <span class="hljs-attr">isLoading</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// 标识是否处于加载中</span><br>  <span class="hljs-attr">err</span>:<span class="hljs-string">&#x27;&#x27;</span> <span class="hljs-comment">// 请求失败的消息</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>&gt;&gt;App.jsx</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br>  <span class="hljs-comment">// 初始化状态</span><br>  state = &#123; <br>    <span class="hljs-attr">users</span>: [], <span class="hljs-comment">// users初始值</span><br>    <span class="hljs-attr">isFirst</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// 是否第一次打开页面</span><br>    <span class="hljs-attr">isLoading</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// 标识是否处于加载中</span><br>    <span class="hljs-attr">err</span>:<span class="hljs-string">&#x27;&#x27;</span> <span class="hljs-comment">// 请求失败的消息</span><br>  &#125;<br>  <span class="hljs-comment">// saveUsers = (users) =&gt; &#123;</span><br>  <span class="hljs-comment">//   this.setState(&#123; users &#125;)</span><br>  <span class="hljs-comment">// &#125;</span><br>  <span class="hljs-comment">// 更新App的state</span><br>  updateAppState = <span class="hljs-function">(<span class="hljs-params">stateObj</span>) =&gt;</span> &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(stateObj)<br>  &#125;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;container&quot;</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Search</span> <span class="hljs-attr">updateAppState</span>=<span class="hljs-string">&#123;this.updateAppState&#125;</span> /&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Users</span> &#123;<span class="hljs-attr">...this.state</span>&#125; /&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>&gt;&gt;Search&#x2F;index&#x2F;jsx</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Search</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br>  search = <span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-comment">// 获取用户输入(连续解构赋值+重命名)</span><br>    <span class="hljs-keyword">const</span> &#123;<span class="hljs-attr">keyWordElement</span>: &#123;<span class="hljs-attr">value</span>: keyWord&#125;&#125; = <span class="hljs-variable language_">this</span><br>    <span class="hljs-comment">// console.log(keyWord)</span><br>    <span class="hljs-comment">// 发送请求前通知App更新状态</span><br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-title function_">updateAppState</span>(&#123;<br>      <span class="hljs-attr">isFirst</span>: <span class="hljs-literal">false</span>,<br>      <span class="hljs-attr">isLoading</span>: <span class="hljs-literal">true</span><br>    &#125;)<br>    <span class="hljs-comment">// 发送网络请求</span><br>    axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">`/api1/search/users?q=<span class="hljs-subst">$&#123;keyWord&#125;</span>`</span>).<span class="hljs-title function_">then</span>(<br>      <span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> &#123;<br>        <span class="hljs-comment">// console.log(&#x27;成功&#x27;)</span><br>        <span class="hljs-comment">// 请求成功，通知App更新状态</span><br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-title function_">updateAppState</span>(&#123;<span class="hljs-attr">isLoading</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">users</span>: response.<span class="hljs-property">data</span>.<span class="hljs-property">items</span>&#125;)<br>        <span class="hljs-comment">// this.props.saveUsers(response.data.items)</span><br>      &#125;,<br>      <span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> &#123;<br>        <span class="hljs-comment">// console.log(&#x27;失败&#x27;, error)</span><br>        <span class="hljs-comment">// 请求失败，通知App更新状态</span><br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-title function_">updateAppState</span>(&#123;<span class="hljs-attr">isLoading</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">err</span>: error.<span class="hljs-property">message</span>&#125;)<br>      &#125;<br>    )<br>  &#125;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">section</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;jumbotron&quot;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;jumbotron-heading&quot;</span>&gt;</span>搜索Github用户<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&#123;c</span> =&gt;</span> this.keyWordElement = c&#125; type=&quot;text&quot; placeholder=&quot;请输入你要搜索的用户名&quot; /&gt;<span class="hljs-symbol">&amp;nbsp;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;this.search&#125;</span>&gt;</span>搜索<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>&gt;&gt;Users&#x2F;index.jsx</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Users</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span> &#123;users, isFirst, isLoading, err&#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span><br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;row&quot;</span>&gt;</span></span><br><span class="language-xml">        &#123;</span><br><span class="language-xml">          isFirst ? <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>欢迎使用，请输入关键字，随后点击搜索<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span> :</span><br><span class="language-xml">          isLoading ? <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Loading...<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span> :</span><br><span class="language-xml">          err ? <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;&#123;color:</span> &#x27;<span class="hljs-attr">red</span>&#x27;&#125;&#125;&gt;</span>&#123;err&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span> :</span><br><span class="language-xml">          users.map((userObj) =&gt; &#123;</span><br><span class="language-xml">            return (</span><br><span class="language-xml">              <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;userObj.id&#125;</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;card&quot;</span>&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;noreferrer&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&#123;userObj.html_url&#125;</span> <span class="hljs-attr">target</span>=<span class="hljs-string">&quot;_blank&quot;</span>&gt;</span></span><br><span class="language-xml">                    <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;avatar&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&#123;userObj.avatar_url&#125;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;&#123;</span> &#x27;<span class="hljs-attr">width</span>&#x27;<span class="hljs-attr">:</span> &#x27;<span class="hljs-attr">100px</span>&#x27; &#125;&#125;/&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;card-text&quot;</span>&gt;</span>&#123;userObj.login&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">              <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">            )</span><br><span class="language-xml">          &#125;)</span><br><span class="language-xml">        &#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>效果展示<br>在这里插入图片描述</p>
<h2 id="5-消息订阅-发布机制"><a href="#5-消息订阅-发布机制" class="headerlink" title="5. 消息订阅-发布机制"></a>5. 消息订阅-发布机制</h2><p>前面案例中，兄弟组件之间的通信总是要借助父组件才行 现在介绍消息订阅-发布机制来进行兄弟组件之间通信</p>
<p>介绍PubSubJS库</p>
<p><a target="_blank" rel="noopener" href="https://github.com/mroderick/PubSubJS">PubSubJS</a></p>
<p>1.工具库: PubSubJS</p>
<p>2.下载: <strong>npm install pubsub-js</strong>在这里插入图片描述</p>
<p>使用 在【接收】数据的组件中【订阅】消息</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">PubSub</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;pubsub-js&#x27;</span> <span class="hljs-comment">//引入（包名的命名规范中不能出现字母）</span><br><br><span class="hljs-title class_">PubSub</span>.<span class="hljs-title function_">subscribe</span>(<span class="hljs-string">&#x27;delete&#x27;</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>)&#123; &#125;); <span class="hljs-comment">// 订阅</span><br><br><span class="hljs-title class_">PubSub</span>.<span class="hljs-title function_">publish</span>(<span class="hljs-string">&#x27;delete&#x27;</span>, data) <span class="hljs-comment">// 发布消息 携带数据</span><br></code></pre></td></tr></table></figure>

<p>在案例中使用</p>
<p>Users组件【接收】数据，所以Users组件【订阅】消息 Search组件 将数据发送出去，【发布】消息</p>
<p><strong>&gt;&gt;App.js</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;container&quot;</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Search</span> /&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Users</span> /&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>&gt;&gt;Users&#x2F;index.jsx</strong></p>
<p>User组件中用状态数据state，状态定义在这里，在这里订阅消息 Search组件改变状态数据，在这里发布消息</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Users</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br>  <span class="hljs-comment">// 初始化状态</span><br>  state = &#123; <br>    <span class="hljs-attr">users</span>: [], <span class="hljs-comment">// users初始值</span><br>    <span class="hljs-attr">isFirst</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// 是否第一次打开页面</span><br>    <span class="hljs-attr">isLoading</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// 标识是否处于加载中</span><br>    <span class="hljs-attr">err</span>:<span class="hljs-string">&#x27;&#x27;</span> <span class="hljs-comment">// 请求失败的消息</span><br>  &#125;<br>  <span class="hljs-title function_">componentDidMount</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">// 订阅消息</span><br>    <span class="hljs-title class_">PubSub</span>.<span class="hljs-title function_">subscribe</span>(<span class="hljs-string">&#x27;ykyk&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">_, data</span>) =&gt;</span> &#123;<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(data)<br>    &#125;)<br>  &#125;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span> &#123;users, isFirst, isLoading, err&#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span><br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;row&quot;</span>&gt;</span></span><br><span class="language-xml">        &#123;</span><br><span class="language-xml">          isFirst ? <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>欢迎使用，请输入关键字，随后点击搜索<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span> :</span><br><span class="language-xml">          isLoading ? <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Loading...<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span> :</span><br><span class="language-xml">          err ? <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;&#123;color:</span> &#x27;<span class="hljs-attr">red</span>&#x27;&#125;&#125;&gt;</span>&#123;err&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span> :</span><br><span class="language-xml">          users.map((userObj) =&gt; &#123;</span><br><span class="language-xml">            return (</span><br><span class="language-xml">              <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;userObj.id&#125;</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;card&quot;</span>&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;noreferrer&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&#123;userObj.html_url&#125;</span> <span class="hljs-attr">target</span>=<span class="hljs-string">&quot;_blank&quot;</span>&gt;</span></span><br><span class="language-xml">                    <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;avatar&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&#123;userObj.avatar_url&#125;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;&#123;</span> &#x27;<span class="hljs-attr">width</span>&#x27;<span class="hljs-attr">:</span> &#x27;<span class="hljs-attr">100px</span>&#x27; &#125;&#125;/&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;card-text&quot;</span>&gt;</span>&#123;userObj.login&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">              <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">            )</span><br><span class="language-xml">          &#125;)</span><br><span class="language-xml">        &#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>&gt;&gt;Search&#x2F;index.jsx</strong></p>
<p>Search组件改变状态数据，在这里发布消息【一改变状态，就发布消息】</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Search</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br>  search = <span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> &#123;<span class="hljs-attr">keyWordElement</span>: &#123;<span class="hljs-attr">value</span>: keyWord&#125;&#125; = <span class="hljs-variable language_">this</span><br>    <span class="hljs-comment">// 发送请求前通知Users更新状态</span><br>    <span class="hljs-comment">// this.props.updateAppState(&#123;isFirst: false,isLoading: true&#125;)</span><br>    <span class="hljs-title class_">PubSub</span>.<span class="hljs-title function_">publish</span>(<span class="hljs-string">&#x27;ykyk&#x27;</span>, &#123;<span class="hljs-attr">isFirst</span>: <span class="hljs-literal">false</span>,<span class="hljs-attr">isLoading</span>: <span class="hljs-literal">true</span>&#125;)<br>    <span class="hljs-comment">// 发送网络请求</span><br>    axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">`/api1/search/users?q=<span class="hljs-subst">$&#123;keyWord&#125;</span>`</span>).<span class="hljs-title function_">then</span>(<br>      <span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> &#123;<br>        <span class="hljs-comment">// 请求成功，通知Users更新状态</span><br>        <span class="hljs-title class_">PubSub</span>.<span class="hljs-title function_">publish</span>(<span class="hljs-string">&#x27;ykyk&#x27;</span>, &#123;<span class="hljs-attr">isLoading</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">users</span>: response.<span class="hljs-property">data</span>.<span class="hljs-property">items</span>&#125;)<br>        <span class="hljs-comment">// this.props.updateAppState(&#123;isLoading: false, users: response.data.items&#125;)</span><br>      &#125;,<br>      <span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> &#123;<br>        <span class="hljs-comment">// 请求失败，通知Users更新状态</span><br>        <span class="hljs-title class_">PubSub</span>.<span class="hljs-title function_">publish</span>(<span class="hljs-string">&#x27;ykyk&#x27;</span>, &#123;<span class="hljs-attr">isLoading</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">err</span>: error.<span class="hljs-property">message</span>&#125;)<br>        <span class="hljs-comment">// this.props.updateAppState(&#123;isLoading: false, err: error.message&#125;)</span><br>      &#125;<br>    )<br>  &#125;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">section</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;jumbotron&quot;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;jumbotron-heading&quot;</span>&gt;</span>搜索Github用户<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&#123;c</span> =&gt;</span> this.keyWordElement = c&#125; type=&quot;text&quot; placeholder=&quot;请输入你要搜索的用户名&quot; /&gt;<span class="hljs-symbol">&amp;nbsp;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;this.search&#125;</span>&gt;</span>搜索<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<ol start="6">
<li>Fetch</li>
</ol>
<p>Axios在前端是对xhr的封装 而Fetch是内置的网络请求方法，不需要单独下载安装</p>
<p>6.1 文档</p>
<p>github.github.io&#x2F;fetch&#x2F;</p>
<p>【相关博文】传统 Ajax 已死，Fetch 永生</p>
<p>6.2 特点</p>
<p>fetch: 原生函数，不再使用XmlHttpRequest对象提交ajax请求</p>
<p>老版本浏览器可能不支持</p>
<p>6.3 实例演示</p>
<p>Search&#x2F;index.jsx</p>
<p>优化前</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Search</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br>	search = <span class="hljs-title function_">async</span>()=&gt;&#123;<br>		<span class="hljs-comment">//获取用户的输入(连续解构赋值+重命名)</span><br>		<span class="hljs-keyword">const</span> &#123;<span class="hljs-attr">keyWordElement</span>:&#123;<span class="hljs-attr">value</span>:keyWord&#125;&#125; = <span class="hljs-variable language_">this</span><br>		<span class="hljs-comment">//发送请求前通知List更新状态</span><br>		<span class="hljs-title class_">PubSub</span>.<span class="hljs-title function_">publish</span>(<span class="hljs-string">&#x27;ykyk&#x27;</span>,&#123;<span class="hljs-attr">isFirst</span>:<span class="hljs-literal">false</span>,<span class="hljs-attr">isLoading</span>:<span class="hljs-literal">true</span>&#125;)<br>		<br>		<span class="hljs-comment">//发送网络请求---使用fetch发送（未优化）</span><br>		<span class="hljs-title function_">fetch</span>(<span class="hljs-string">`/api1/search/users2?q=<span class="hljs-subst">$&#123;keyWord&#125;</span>`</span>).<span class="hljs-title function_">then</span>(<br>			<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> &#123;<br>				<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;联系服务器成功了&#x27;</span>);<br>				<span class="hljs-keyword">return</span> response.<span class="hljs-title function_">json</span>()<br>			&#125;,<br>			<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> &#123;<br>				<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;联系服务器失败了&#x27;</span>,error);<br>        <span class="hljs-comment">//返回初始化状态的promise值,不再往下走。</span><br>				<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">()=&gt;</span>&#123;&#125;)<br>			&#125;<br>		).<span class="hljs-title function_">then</span>(<br>			<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> &#123;<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;获取数据成功了&#x27;</span>,response);&#125;,<br>			<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> &#123;<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;获取数据失败了&#x27;</span>,error);&#125;<br>		)<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>优化后</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Search</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br>	search = <span class="hljs-title function_">async</span>()=&gt;&#123;<br>		<span class="hljs-comment">//获取用户的输入(连续解构赋值+重命名)</span><br>		<span class="hljs-keyword">const</span> &#123;<span class="hljs-attr">keyWordElement</span>:&#123;<span class="hljs-attr">value</span>:keyWord&#125;&#125; = <span class="hljs-variable language_">this</span><br>		<span class="hljs-comment">//发送请求前通知List更新状态</span><br>		<span class="hljs-title class_">PubSub</span>.<span class="hljs-title function_">publish</span>(<span class="hljs-string">&#x27;ykyk&#x27;</span>,&#123;<span class="hljs-attr">isFirst</span>:<span class="hljs-literal">false</span>,<span class="hljs-attr">isLoading</span>:<span class="hljs-literal">true</span>&#125;)<br><br>		<span class="hljs-comment">//发送网络请求---使用fetch发送（优化）</span><br>		<span class="hljs-keyword">try</span> &#123;<br>			<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`/api1/search/users2?q=<span class="hljs-subst">$&#123;keyWord&#125;</span>`</span>)<br>			<span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>()<br>			<span class="hljs-comment">// console.log(data);</span><br>			<span class="hljs-title class_">PubSub</span>.<span class="hljs-title function_">publish</span>(<span class="hljs-string">&#x27;ykyk&#x27;</span>,&#123;<span class="hljs-attr">isLoading</span>:<span class="hljs-literal">false</span>, <span class="hljs-attr">users</span>:data.<span class="hljs-property">items</span>&#125;)<br>		&#125; <span class="hljs-keyword">catch</span> (error) &#123;<br>			<span class="hljs-comment">// console.log(&#x27;请求出错&#x27;,error);</span><br>			<span class="hljs-title class_">PubSub</span>.<span class="hljs-title function_">publish</span>(<span class="hljs-string">&#x27;ykyk&#x27;</span>,&#123;<span class="hljs-attr">isLoading</span>:<span class="hljs-literal">false</span>, <span class="hljs-attr">err</span>:error.<span class="hljs-property">message</span>&#125;)<br>		&#125;<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>


<ol start="7">
<li>总结</li>
</ol>
<p>设计状态时要考虑全面，例如带有网络请求的组件，要考虑请求失败怎么办。</p>
<p>ES6小知识点：解构赋值+重命名</p>
<p>let obj &#x3D; {a:{b:1}}</p>
<p>const {a} &#x3D; obj; &#x2F;&#x2F;传统解构赋值</p>
<p>const {a:{b}} &#x3D; obj; &#x2F;&#x2F;连续解构赋值</p>
<p>const {a:{b:value}} &#x3D; obj; &#x2F;&#x2F;连续解构赋值+重命名</p>
<p>消息订阅与发布机制</p>
<p>先订阅，再发布（理解：有一种隔空对话的感觉）</p>
<p>适用于任意组件间通信</p>
<p>要在组件的componentWillUnmount中取消订阅</p>
<p>fetch发送请求（关注分离的设计思想）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">try</span> &#123;<br>	<span class="hljs-keyword">const</span> response= <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`/api1/search/users2?q=<span class="hljs-subst">$&#123;keyWord&#125;</span>`</span>)<br>	<span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>()<br>	<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data);<br>&#125; <span class="hljs-keyword">catch</span> (error) &#123;<br>	<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;请求出错&#x27;</span>,error);<br>&#125;<br></code></pre></td></tr></table></figure>

<p>【React】SPA - 路由机制 - react-router5 - 基本路由 - 嵌套路由 - 传递参数 - 路由跳转</p>
<h1 id="1-相关理解"><a href="#1-相关理解" class="headerlink" title="1. 相关理解"></a>1. 相关理解</h1><h2 id="1-1-SPA的理解"><a href="#1-1-SPA的理解" class="headerlink" title="1.1. SPA的理解"></a>1.1. SPA的理解</h2><p>单页Web应用（single page web application，SPA）</p>
<p>整个应用只有一个完整的页面。</p>
<p>点击页面中的链接不会刷新页面，只会做页面的局部更新。</p>
<p>数据都需要通过ajax请求获取, 并在前端异步展现。</p>
<h2 id="1-2-路由的理解"><a href="#1-2-路由的理解" class="headerlink" title="1.2. 路由的理解"></a>1.2. 路由的理解</h2><h3 id="1-2-1-什么是路由"><a href="#1-2-1-什么是路由" class="headerlink" title="1.2.1 什么是路由?"></a>1.2.1 什么是路由?</h3><p>一个路由就是一个映射关系(key: value)</p>
<p>key为路径, value可能是function或component</p>
<h3 id="1-2-2-路由分类"><a href="#1-2-2-路由分类" class="headerlink" title="1.2.2 路由分类"></a>1.2.2 路由分类</h3><ul>
<li><ol>
<li>后端路由</li>
</ol>
<ul>
<li><p>理解： value是function, 用来处理客户端提交的请求。</p>
</li>
<li><p>注册路由： router.get(path, function(req, res))</p>
</li>
<li><p>工作过程：当node接收到一个请求时, 根据请求路径找到匹配的路由, 调用路由中的函数来处理请求, 返回响应数据</p>
</li>
</ul>
</li>
<li><ol start="2">
<li>前端路由</li>
</ol>
<ul>
<li><p>浏览器端路由，value是component，用于展示页面内容。</p>
</li>
<li><p>注册路由: <Route path="/test" component={Test}></p>
</li>
<li><p>工作过程：当浏览器的path变为&#x2F;test时, 当前路由组件就会变为Test组件</p>
</li>
<li><p>主要是通过操作BOM中的history来操作路径</p>
</li>
</ul>
</li>
</ul>
<h2 id="1-3-react-router-dom-的理解"><a href="#1-3-react-router-dom-的理解" class="headerlink" title="1.3. react-router-dom 的理解"></a>1.3. react-router-dom 的理解</h2><ul>
<li><p>React的一个插件库。</p>
</li>
<li><p>专门用来实现一个SPA应用。</p>
</li>
<li><p>基于React的项目基本都会用到此库。</p>
</li>
</ul>
<h1 id="2-react-router-dom相关API"><a href="#2-react-router-dom相关API" class="headerlink" title="2. react-router-dom相关API"></a>2. react-router-dom相关API</h1><h2 id="2-1-内置组件"><a href="#2-1-内置组件" class="headerlink" title="2.1. 内置组件"></a>2.1. 内置组件</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;<span class="hljs-title class_">BrowserRouter</span>&gt;<br>&lt;<span class="hljs-title class_">HashRouter</span>&gt;<br>&lt;<span class="hljs-title class_">Route</span>&gt;<br>&lt;<span class="hljs-title class_">Redirect</span>&gt;<br>&lt;<span class="hljs-title class_">Link</span>&gt;<br>&lt;<span class="hljs-title class_">NavLink</span>&gt;<br>&lt;<span class="hljs-title class_">Switch</span>&gt;<br></code></pre></td></tr></table></figure>

<h2 id="2-2-其它"><a href="#2-2-其它" class="headerlink" title="2.2. 其它"></a>2.2. 其它</h2><p>history 对象</p>
<p>match 对象</p>
<p>withRouter 函数</p>
<h1 id="3-基本路由使用"><a href="#3-基本路由使用" class="headerlink" title="3. 基本路由使用"></a>3. 基本路由使用</h1><h2 id="3-1-效果"><a href="#3-1-效果" class="headerlink" title="3.1. 效果"></a>3.1. 效果</h2><p><a target="_blank" rel="noopener" href="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/34f6957bbd4f46efac620ff7d66003a4~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp">在这里插入图片描述</a></p>
<h2 id="3-2-准备"><a href="#3-2-准备" class="headerlink" title="3.2. 准备"></a>3.2. 准备</h2><p>下载react-router-dom: npm install react-router-dom</p>
<p>引入bootstrap.css: <link rel="stylesheet" href="/css/bootstrap.css"></p>
<h2 id="3-3-路由的基本使用"><a href="#3-3-路由的基本使用" class="headerlink" title="3.3 路由的基本使用"></a>3.3 路由的基本使用</h2><p>1.明确好界面中的导航区、展示区</p>
<p>2.导航区的a标签改为Link标签 <code>&lt;Link to=&quot;/xxxxx&quot;&gt;Demo&lt;/Link&gt;</code>&#x2F;&#x2F;to里面尽量都小写</p>
<p>3.展示区写Route标签进行路径的匹配 <code>&lt;Route path=&#39;/xxxx&#39; component=&#123;Demo&#125;/&gt;</code></p>
<p>4.<code>&lt;App&gt;</code>的最外侧包裹了一个<code>&lt;BrowserRouter&gt;</code>或<code>&lt;HashRouter&gt;</code></p>
<p>(BrowserRouter 将会监听 URL 的变化，当 URL 变更时，它将使浏览器显示相应的页面；所以要在最外侧包裹一个)</p>
<h2 id="3-4-实现"><a href="#3-4-实现" class="headerlink" title="3.4 实现"></a>3.4 实现</h2><p><strong>&gt;&gt;Index.js</strong></p>
<p>这里用一个路由器标签将整个App包起来，保证使用的是同一个路由器这里使用BrowserRouter</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//引入react核心库</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><span class="hljs-comment">//引入ReactDOM</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">ReactDOM</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-dom&#x27;</span><br><span class="hljs-comment">//</span><br><span class="hljs-keyword">import</span> &#123;<span class="hljs-title class_">BrowserRouter</span>&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-router-dom&#x27;</span><br><span class="hljs-comment">//引入App</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./App&#x27;</span><br><br><span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">render</span>(<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">BrowserRouter</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">App</span>/&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">BrowserRouter</span>&gt;</span></span>,<br>    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;root&#x27;</span>)<br>)<br></code></pre></td></tr></table></figure>

<p><strong>&gt;&gt;App.jsx</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; <span class="hljs-title class_">Component</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">Link</span>,<span class="hljs-title class_">Route</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-router-dom&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Home</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./Home&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">About</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./About&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;row&quot;</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;col-xs-offset-2 col-xs-8&quot;</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;page-header&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>React Router Demo<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;row&quot;</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;col-xs-2 col-xs-offset-2&quot;</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;list-group&quot;</span>&gt;</span></span><br><span class="language-xml">            &#123;/* 原生html中，靠<span class="hljs-tag">&lt;<span class="hljs-name">a</span>&gt;</span>跳转不同的页面 */&#125;</span><br><span class="language-xml">            &#123;/* <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;list-group-item&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;./about.html&quot;</span>&gt;</span>About<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;list-group-item active&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;./home.html&quot;</span>&gt;</span>Home<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span> */&#125;</span><br><span class="language-xml"></span><br><span class="language-xml">            &#123;/* 在React中靠路由链接实现切换组件--编写路由链接 */&#125;</span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;list-group-item&quot;</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/about&quot;</span>&gt;</span>About<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;list-group-item&quot;</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/home&quot;</span>&gt;</span>Home<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;col-xs-6&quot;</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;panel&quot;</span>&gt;</span></span><br><span class="language-xml">              <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;panel-body&quot;</span>&gt;</span></span><br><span class="language-xml">                &#123;/* 注册路由 */&#125;</span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">&#x27;/about&#x27;</span> <span class="hljs-attr">component</span>=<span class="hljs-string">&#123;About&#125;</span> /&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">&#x27;/home&#x27;</span> <span class="hljs-attr">component</span>=<span class="hljs-string">&#123;Home&#125;</span> /&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">    )</span><br><span class="language-xml">  &#125;</span><br><span class="language-xml">&#125;</span><br></code></pre></td></tr></table></figure>

<h2 id="3-5-路由组件与一般组件的区别"><a href="#3-5-路由组件与一般组件的区别" class="headerlink" title="3.5 路由组件与一般组件的区别"></a>3.5 路由组件与一般组件的区别</h2><p><code>#号后面的东西不作为数据发送给服务器</code></p>
<p>一、写法不同</p>
<ul>
<li>一般组件：</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;<span class="hljs-title class_">Demo</span>/&gt;<br></code></pre></td></tr></table></figure>

<ul>
<li>路由组件：</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;<span class="hljs-title class_">Route</span> path=<span class="hljs-string">&quot;/demo&quot;</span> component=&#123;<span class="hljs-title class_">Demo</span>&#125;/&gt;<br></code></pre></td></tr></table></figure>

<p>二、存放位置不同</p>
<ul>
<li><p>一般组件：components</p>
</li>
<li><p>路由组件：pages</p>
</li>
</ul>
<p>三、接收到的props不同</p>
<ul>
<li><p>一般组件：写组件标签时传递了什么，就能收到什么</p>
</li>
<li><p>路由组件：接收到三个固定的属性</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-attr">history</span>: <br><br>  <span class="hljs-attr">go</span>: ƒ <span class="hljs-title function_">go</span>(n)<br><br>  <span class="hljs-attr">goBack</span>: ƒ <span class="hljs-title function_">goBack</span>() <br><br>  <span class="hljs-attr">goForward</span>: ƒ <span class="hljs-title function_">goForward</span>() <br><br>  <span class="hljs-attr">push</span>: ƒ <span class="hljs-title function_">push</span>(path, state) <br><br>  <span class="hljs-attr">replace</span>: ƒ <span class="hljs-title function_">replace</span>(path, state) <br><br><br><span class="hljs-attr">location</span>:<br><br>  <span class="hljs-attr">pathname</span>: <span class="hljs-string">&quot;/about&quot;</span><br><br>  <span class="hljs-attr">search</span>: <span class="hljs-string">&quot;&quot;</span><br><br>  <span class="hljs-attr">state</span>: <span class="hljs-literal">undefined</span><br><br><br><span class="hljs-attr">match</span>:<br><br>  <span class="hljs-attr">url</span>: <span class="hljs-string">&quot;/about&quot;</span><br><br>  <span class="hljs-attr">params</span>: &#123;&#125;<br><br>  <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;/about&quot;</span><br></code></pre></td></tr></table></figure>



<h2 id="3-6-NavLink与封装NavLink"><a href="#3-6-NavLink与封装NavLink" class="headerlink" title="3.6 NavLink与封装NavLink"></a>3.6 NavLink与封装NavLink</h2><p>NavLink可以实现路由链接的高亮，通过activeClassName属性指定样式名，默认是”active”</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;<span class="hljs-title class_">NavLink</span> activeClassName=<span class="hljs-string">&quot;demo&quot;</span> className=<span class="hljs-string">&quot;list-group-item&quot;</span> to=<span class="hljs-string">&quot;/home&quot;</span>&gt;<span class="hljs-title class_">Home</span>&lt;/<span class="hljs-title class_">NavLink</span>&gt;<br></code></pre></td></tr></table></figure>

<p>可以自己封装一个NavLink【一般组件】</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; <span class="hljs-title class_">Component</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><span class="hljs-keyword">import</span> &#123;<span class="hljs-title class_">NavLink</span>&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-router-dom&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyNavLink</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">// console.log(this.props);</span><br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">NavLink</span> <span class="hljs-attr">activeClassName</span>=<span class="hljs-string">&quot;demo&quot;</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;list-group-item&quot;</span> &#123;<span class="hljs-attr">...this.props</span>&#125; /&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>标签体内容是特殊的标签属性通过this.props.children可以获取标签体内容</p>
<p>使用</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;<span class="hljs-title class_">MyNavLink</span> to=<span class="hljs-string">&quot;/about&quot;</span>&gt;<span class="hljs-title class_">About</span>&lt;/<span class="hljs-title class_">MyNavLink</span>&gt;<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">MyNavLink</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/home&quot;</span>&gt;</span>Home<span class="hljs-tag">&lt;/<span class="hljs-name">MyNavLink</span>&gt;</span></span><br></code></pre></td></tr></table></figure>



<h2 id="3-7-Switch的使用"><a href="#3-7-Switch的使用" class="headerlink" title="3.7 Switch的使用"></a>3.7 Switch的使用</h2><ul>
<li><p>通常情况下，path和component是一一对应的关系。<code>&lt;Route path=&#39;/about&#39; component=&#123;About&#125; /&gt;</code></p>
</li>
<li><p><strong>Switch</strong>可以提高路由匹配效率(单一匹配)。</p>
</li>
</ul>
<p>这样只要匹配到了第一个就不会再往下匹配了</p>
<p>引入switch</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;<span class="hljs-title class_">Switch</span>&gt;<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">&quot;/about&quot;</span> <span class="hljs-attr">component</span>=<span class="hljs-string">&#123;About&#125;/</span>&gt;</span></span><br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">&quot;/home&quot;</span> <span class="hljs-attr">component</span>=<span class="hljs-string">&#123;Home&#125;/</span>&gt;</span></span> <br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">&quot;/home&quot;</span> <span class="hljs-attr">component</span>=<span class="hljs-string">&#123;Test&#125;/</span>&gt;</span></span><br>&lt;/<span class="hljs-title class_">Switch</span>&gt;<br></code></pre></td></tr></table></figure>

<h1 id="例子："><a href="#例子：" class="headerlink" title="例子："></a>例子：</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>,&#123;<span class="hljs-title class_">Component</span>&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;<br><span class="hljs-keyword">import</span> &#123;<span class="hljs-title class_">HashRouter</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">Router</span>,<span class="hljs-title class_">Route</span>,<span class="hljs-title class_">Link</span>,<span class="hljs-title class_">Switch</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-router-dom&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Main</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./Main&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">About</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./About&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Topic</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./Topic&#x27;</span>;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Home</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br>    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">props</span>) &#123;<br>        <span class="hljs-variable language_">super</span>(props);<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = &#123;  &#125;;<br>    &#125;<br>    <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> (<br>            <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Router</span>&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span></span><br><span class="language-xml">                    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span></span><br><span class="language-xml">                        <span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/&quot;</span>&gt;</span>main<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span></span><br><span class="language-xml">                    <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="language-xml">                    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span></span><br><span class="language-xml">                        <span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/about&quot;</span>&gt;</span>about<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span></span><br><span class="language-xml">                    <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="language-xml">                    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span></span><br><span class="language-xml">                        <span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/topic&quot;</span>&gt;</span>topic<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span></span><br><span class="language-xml">                    <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">hr</span> /&gt;</span></span><br><span class="language-xml">                &#123;/* &#123;this.props.children&#125; */&#125;</span><br><span class="language-xml">                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">                &#123;/* Switch匹配到第一个路由就不会继续匹配了,</span><br><span class="language-xml">                如果不加Route 里不加 exact，那么凡是Link里面 to 的路径包含了/，</span><br><span class="language-xml">                那么就会被匹配到，于是Switch就不继续匹配下去</span><br><span class="language-xml">                </span><br><span class="language-xml">                */&#125;</span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">Switch</span>&gt;</span></span><br><span class="language-xml">                    <span class="hljs-tag">&lt;<span class="hljs-name">Route</span>  <span class="hljs-attr">exact</span> <span class="hljs-attr">path</span>=<span class="hljs-string">&quot;/&quot;</span> <span class="hljs-attr">component</span>=<span class="hljs-string">&#123;Main&#125;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Route</span>&gt;</span></span><br><span class="language-xml">                    <span class="hljs-tag">&lt;<span class="hljs-name">Route</span>  <span class="hljs-attr">path</span>=<span class="hljs-string">&quot;/about&quot;</span> <span class="hljs-attr">component</span>=<span class="hljs-string">&#123;About&#125;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Route</span>&gt;</span></span><br><span class="language-xml">                    <span class="hljs-tag">&lt;<span class="hljs-name">Route</span>  <span class="hljs-attr">path</span>=<span class="hljs-string">&quot;/topic&quot;</span> <span class="hljs-attr">component</span>=<span class="hljs-string">&#123;Topic&#125;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Route</span>&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;/<span class="hljs-name">Switch</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">Router</span>&gt;</span></span><br>            <br>        );<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">Home</span>;<br></code></pre></td></tr></table></figure>

<h2 id="3-8-解决多级路径刷新页面样式丢失的问题"><a href="#3-8-解决多级路径刷新页面样式丢失的问题" class="headerlink" title="3.8 解决多级路径刷新页面样式丢失的问题"></a>3.8 解决多级路径刷新页面样式丢失的问题</h2><p>【Pulbic文件夹就是根目录&#x2F;】</p>
<p>《解决方案》</p>
<ul>
<li><p>public&#x2F;index.html 中 引入样式时不写 .&#x2F; 写 &#x2F; （常用）【绝对路径】</p>
</li>
<li><p>public&#x2F;index.html 中 引入样式时不写 .&#x2F; 写 %PUBLIC_URL% （常用）</p>
</li>
<li><p>使用HashRouter</p>
</li>
</ul>
<p>问题原因：多级路径下，加载样式时，使用相对路径，在刷新时将多级路由也考虑在内</p>
<p>&#x2F;&#x2F; 如下，样式路径 ‘.&#x2F;‘ 导致加载资源时，需要参考当前路径，因此多级路由会影响资源的加载<br> <link rel="stylesheet" href="./test.css" /></p>
<p>解决的三种方法：<br>使用 绝对路径<br>public&#x2F;index.html 中 引入样式时不写 .&#x2F; 写 &#x2F; （常用）<br> &#x2F;&#x2F; 加载 根目录下的 test.css ，与当前路由无关<br> <link rel="stylesheet" href="/test.css" /></p>
<p>使用 %PUBLIC_URL%（此方法只有在react中有效）<br>public&#x2F;index.html 中 引入样式时不写 .&#x2F; 写 %PUBLIC_URL% （常用）<br> &#x2F;&#x2F; 加载 public 文件夹下的 test.css ，与当前路由无关<br> <link rel="stylesheet" href="%PUBLIC_URL%/test.css" /></p>
<p>原理：使用绝对路径，即固定了是public下的test.css，并不会被变动。</p>
<p>使用HashRouter<br>ReactDOM.render(<br>    <HashRouter><br>        <App /><br>    </HashRouter><br>    , document.getElementById(‘root’))</p>
<p>原理：因为 hash 是不会改变路径的，也不会包含在请求URL中，因此不会影响相对路径</p>
<p>总结：<br>样式丢失的原因是，加载资源时使用相对路径，而相对路径又会参考当前路由路径，因此导致加载不到资源，解决办法则是使用绝对路径等，让其加载资源时不再参考路由路径。</p>
<h2 id="3-9-路由的严格匹配与模糊匹配"><a href="#3-9-路由的严格匹配与模糊匹配" class="headerlink" title="3.9 路由的严格匹配与模糊匹配"></a>3.9 路由的严格匹配与模糊匹配</h2><p>默认使用的是模糊匹配（简单记：【输入的路径】必须包含要【匹配的路径】，且顺序要一致）<br>开启严格匹配：<Route exact={true} path="/about" component={About}/>简写<Route exact path="/about" component={About}/><br>严格匹配不要随便开启，需要再开，有些时候开启会导致无法继续匹配二级路由</p>
<h2 id="3-10-Redirect的使用【重定向】"><a href="#3-10-Redirect的使用【重定向】" class="headerlink" title="3.10 Redirect的使用【重定向】"></a>3.10 Redirect的使用【重定向】</h2><p>一般写在所有路由注册的最下方，当所有路由都无法匹配时，跳转到Redirect指定的路由</p>
<p>具体编码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;<span class="hljs-title class_">Switch</span>&gt;<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">&quot;/about&quot;</span> <span class="hljs-attr">component</span>=<span class="hljs-string">&#123;About&#125;/</span>&gt;</span></span><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">&quot;/home&quot;</span> <span class="hljs-attr">component</span>=<span class="hljs-string">&#123;Home&#125;/</span>&gt;</span></span><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Redirect</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/about&quot;</span>/&gt;</span></span><br>&lt;/<span class="hljs-title class_">Switch</span>&gt;<br></code></pre></td></tr></table></figure>

<h1 id="4-嵌套路由使用"><a href="#4-嵌套路由使用" class="headerlink" title="4. 嵌套路由使用"></a>4. 嵌套路由使用</h1><h2 id="4-1-效果-1"><a href="#4-1-效果-1" class="headerlink" title="4.1 效果"></a>4.1 效果</h2><p>在这里插入图片描述</p>
<h2 id="4-2-注意"><a href="#4-2-注意" class="headerlink" title="4.2 注意"></a>4.2 注意</h2><p>注册子路由时要写上父路由的path值</p>
<p>路由的匹配是按照注册路由的顺序进行的</p>
<h2 id="4-3-实现"><a href="#4-3-实现" class="headerlink" title="4.3 实现"></a>4.3 实现</h2><p><strong>&gt;&gt;Home&#x2F;index.jsx</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; <span class="hljs-title class_">Component</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">Route</span>, <span class="hljs-title class_">NavLink</span>,<span class="hljs-title class_">Redirect</span>,<span class="hljs-title class_">Switch</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-router-dom&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">News</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./News&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Message</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./Message&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Home</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>我是Home的内容<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;nav nav-tabs&quot;</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span></span><br><span class="language-xml">              <span class="hljs-tag">&lt;<span class="hljs-name">NavLink</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;list-group-item&quot;</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/home/news&quot;</span>&gt;</span>News<span class="hljs-tag">&lt;/<span class="hljs-name">NavLink</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span></span><br><span class="language-xml">              <span class="hljs-tag">&lt;<span class="hljs-name">NavLink</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;list-group-item&quot;</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/home/message&quot;</span>&gt;</span>Message<span class="hljs-tag">&lt;/<span class="hljs-name">NavLink</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">Switch</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">&#x27;/home/news&#x27;</span> <span class="hljs-attr">component</span>=<span class="hljs-string">&#123;News&#125;</span> /&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">&#x27;/home/message&#x27;</span> <span class="hljs-attr">component</span>=<span class="hljs-string">&#123;Message&#125;</span> /&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">Redirect</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&#x27;/home/news&#x27;</span> /&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;/<span class="hljs-name">Switch</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h1 id="5-向路由组件传递参数数据"><a href="#5-向路由组件传递参数数据" class="headerlink" title="5. 向路由组件传递参数数据"></a>5. 向路由组件传递参数数据</h1><h2 id="5-1-效果"><a href="#5-1-效果" class="headerlink" title="5.1 效果"></a>5.1 效果</h2><p>在这里插入图片描述</p>
<h2 id="5-2-具体方法"><a href="#5-2-具体方法" class="headerlink" title="5.2 具体方法"></a>5.2 具体方法</h2><p>方法1. params参数<br>路由链接(携带参数)：&lt;Link to&#x3D;’&#x2F;demo&#x2F;test&#x2F;tom&#x2F;18’}&gt;详情</Link><br>注册路由(声明接收)：<Route path="/demo/test/:name/:age" component={Test}/><br>接收参数：this.props.match.params</p>
<p><strong>&gt;&gt;Message&#x2F;index.jsx</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; <span class="hljs-title class_">Component</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">Link</span>, <span class="hljs-title class_">Route</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-router-dom&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Detail</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./Detail&#x27;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Message</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br>  state = &#123;<br>    <span class="hljs-attr">messageArr</span>: [<br>      &#123; <span class="hljs-attr">id</span>: <span class="hljs-string">&#x27;01&#x27;</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;消息1&#x27;</span> &#125;,<br>      &#123; <span class="hljs-attr">id</span>: <span class="hljs-string">&#x27;02&#x27;</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;消息2&#x27;</span> &#125;,<br>      &#123; <span class="hljs-attr">id</span>: <span class="hljs-string">&#x27;03&#x27;</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;消息3&#x27;</span> &#125;,<br>    ]<br>  &#125;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span> &#123; messageArr &#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span></span><br><span class="language-xml">          &#123;</span><br><span class="language-xml">            messageArr.map((msgObj) =&gt; &#123;</span><br><span class="language-xml">              return (</span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;msgObj.id&#125;</span>&gt;</span></span><br><span class="language-xml">                  &#123;/* 向路由组件传递params参数 */&#125;</span><br><span class="language-xml">                  <span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&#123;</span>`/<span class="hljs-attr">home</span>/<span class="hljs-attr">message</span>/<span class="hljs-attr">detail</span>/$&#123;<span class="hljs-attr">msgObj.id</span>&#125;/$&#123;<span class="hljs-attr">msgObj.title</span>&#125;`&#125;&gt;</span>&#123;msgObj.title&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="language-xml">              )</span><br><span class="language-xml">            &#125;)</span><br><span class="language-xml">          &#125;</span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">hr</span> /&gt;</span></span><br><span class="language-xml">        &#123;/* 声明接收params参数 */&#125;</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">&quot;/home/message/detail/:id/:title&quot;</span> <span class="hljs-attr">component</span>=<span class="hljs-string">&#123;Detail&#125;/</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>&gt;&gt;Detail&#x2F;index.jsx</strong></p>
<p>在这里插入图片描述</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; <span class="hljs-title class_">Component</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Detail</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br>  state = &#123;<br>    detailData : [<br>      &#123; <span class="hljs-attr">id</span>: <span class="hljs-string">&#x27;01&#x27;</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">&#x27;你好啊&#x27;</span> &#125;,<br>      &#123; <span class="hljs-attr">id</span>: <span class="hljs-string">&#x27;02&#x27;</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">&#x27;还不错鸭&#x27;</span> &#125;,<br>      &#123; <span class="hljs-attr">id</span>: <span class="hljs-string">&#x27;03&#x27;</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">&#x27;显示我吧&#x27;</span> &#125;<br>    ]<br>  &#125;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>)<br>    <span class="hljs-comment">// 接收params参数</span><br>    <span class="hljs-keyword">const</span> &#123; id, title &#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-property">match</span>.<span class="hljs-property">params</span><br>    <span class="hljs-keyword">const</span> findResult= <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">detailData</span>.<span class="hljs-title function_">find</span>(<span class="hljs-function">(<span class="hljs-params">dataObj</span>) =&gt;</span> &#123;<br>      <span class="hljs-keyword">return</span> dataObj.<span class="hljs-property">id</span> === id<br>    &#125;)<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>ID: &#123;id &#125;<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>Title: &#123;title &#125;<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>Content: &#123; findResult.content&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/React/" class="print-no-link">#React</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>React</div>
      <div>https://trumen1219.github.io/2023/03/01/React/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>Trumen</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2023年3月1日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2023/04/01/Pinia/" title="Pinia">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Pinia</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2023/02/01/typeScript/" title="TypeScript">
                        <span class="hidden-mobile">TypeScript</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
